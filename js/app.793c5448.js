(function(e){function t(t){for(var n,i,o=t[0],c=t[1],l=t[2],u=0,d=[];u<o.length;u++)i=o[u],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);_&&_(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={app:0},s=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var _=c;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"025e":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"g",(function(){return randId})),__webpack_require__.d(__webpack_exports__,"k",(function(){return resolveDOI})),__webpack_require__.d(__webpack_exports__,"d",(function(){return dataURLtoFile})),__webpack_require__.d(__webpack_exports__,"j",(function(){return resizeImage})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getFullRdfFromDeposit})),__webpack_require__.d(__webpack_exports__,"h",(function(){return rdfToMetadata})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ZenodoClient})),__webpack_require__.d(__webpack_exports__,"b",(function(){return anonymousAnimals})),__webpack_require__.d(__webpack_exports__,"e",(function(){return debounce})),__webpack_require__.d(__webpack_exports__,"c",(function(){return concatAndResolveUrl})),__webpack_require__.d(__webpack_exports__,"i",(function(){return replaceAllRelByAbs}));var core_js_modules_es_symbol__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a4d3"),core_js_modules_es_symbol__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_symbol__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_symbol_description__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("e01a"),core_js_modules_es_symbol_description__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_symbol_description__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("99af"),core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("4de4"),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_includes__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("caad"),core_js_modules_es_array_includes__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_includes__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("c975"),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("a15b"),core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("d81d"),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_array_slice__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("fb6a"),core_js_modules_es_array_slice__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_array_slice__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("b0c0"),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_regexp_constructor__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("4d63"),core_js_modules_es_regexp_constructor__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_regexp_constructor__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("25f0"),core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es_string_ends_with__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("8a79"),core_js_modules_es_string_ends_with__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es_string_ends_with__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es_string_includes__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("2532"),core_js_modules_es_string_includes__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es_string_includes__WEBPACK_IMPORTED_MODULE_15__),core_js_modules_es_string_iterator__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("3ca3"),core_js_modules_es_string_iterator__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(core_js_modules_es_string_iterator__WEBPACK_IMPORTED_MODULE_16__),core_js_modules_es_string_match__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("466d"),core_js_modules_es_string_match__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(core_js_modules_es_string_match__WEBPACK_IMPORTED_MODULE_17__),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("5319"),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_18__),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("1276"),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_19__),core_js_modules_es_string_starts_with__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("2ca0"),core_js_modules_es_string_starts_with__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(core_js_modules_es_string_starts_with__WEBPACK_IMPORTED_MODULE_20__),core_js_modules_es_typed_array_uint8_array__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("5cc6"),core_js_modules_es_typed_array_uint8_array__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(core_js_modules_es_typed_array_uint8_array__WEBPACK_IMPORTED_MODULE_21__),core_js_modules_es_typed_array_copy_within__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("9a8c"),core_js_modules_es_typed_array_copy_within__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(core_js_modules_es_typed_array_copy_within__WEBPACK_IMPORTED_MODULE_22__),core_js_modules_es_typed_array_every__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("a975"),core_js_modules_es_typed_array_every__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(core_js_modules_es_typed_array_every__WEBPACK_IMPORTED_MODULE_23__),core_js_modules_es_typed_array_fill__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("735e"),core_js_modules_es_typed_array_fill__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(core_js_modules_es_typed_array_fill__WEBPACK_IMPORTED_MODULE_24__),core_js_modules_es_typed_array_filter__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("c1ac"),core_js_modules_es_typed_array_filter__WEBPACK_IMPORTED_MODULE_25___default=__webpack_require__.n(core_js_modules_es_typed_array_filter__WEBPACK_IMPORTED_MODULE_25__),core_js_modules_es_typed_array_find__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("d139"),core_js_modules_es_typed_array_find__WEBPACK_IMPORTED_MODULE_26___default=__webpack_require__.n(core_js_modules_es_typed_array_find__WEBPACK_IMPORTED_MODULE_26__),core_js_modules_es_typed_array_find_index__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("3a7b"),core_js_modules_es_typed_array_find_index__WEBPACK_IMPORTED_MODULE_27___default=__webpack_require__.n(core_js_modules_es_typed_array_find_index__WEBPACK_IMPORTED_MODULE_27__),core_js_modules_es_typed_array_for_each__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("d5d6"),core_js_modules_es_typed_array_for_each__WEBPACK_IMPORTED_MODULE_28___default=__webpack_require__.n(core_js_modules_es_typed_array_for_each__WEBPACK_IMPORTED_MODULE_28__),core_js_modules_es_typed_array_includes__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("82f8"),core_js_modules_es_typed_array_includes__WEBPACK_IMPORTED_MODULE_29___default=__webpack_require__.n(core_js_modules_es_typed_array_includes__WEBPACK_IMPORTED_MODULE_29__),core_js_modules_es_typed_array_index_of__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("e91f"),core_js_modules_es_typed_array_index_of__WEBPACK_IMPORTED_MODULE_30___default=__webpack_require__.n(core_js_modules_es_typed_array_index_of__WEBPACK_IMPORTED_MODULE_30__),core_js_modules_es_typed_array_iterator__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("60bd"),core_js_modules_es_typed_array_iterator__WEBPACK_IMPORTED_MODULE_31___default=__webpack_require__.n(core_js_modules_es_typed_array_iterator__WEBPACK_IMPORTED_MODULE_31__),core_js_modules_es_typed_array_join__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__("5f96"),core_js_modules_es_typed_array_join__WEBPACK_IMPORTED_MODULE_32___default=__webpack_require__.n(core_js_modules_es_typed_array_join__WEBPACK_IMPORTED_MODULE_32__),core_js_modules_es_typed_array_last_index_of__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__("3280"),core_js_modules_es_typed_array_last_index_of__WEBPACK_IMPORTED_MODULE_33___default=__webpack_require__.n(core_js_modules_es_typed_array_last_index_of__WEBPACK_IMPORTED_MODULE_33__),core_js_modules_es_typed_array_map__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__("3fcc"),core_js_modules_es_typed_array_map__WEBPACK_IMPORTED_MODULE_34___default=__webpack_require__.n(core_js_modules_es_typed_array_map__WEBPACK_IMPORTED_MODULE_34__),core_js_modules_es_typed_array_reduce__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__("ca91"),core_js_modules_es_typed_array_reduce__WEBPACK_IMPORTED_MODULE_35___default=__webpack_require__.n(core_js_modules_es_typed_array_reduce__WEBPACK_IMPORTED_MODULE_35__),core_js_modules_es_typed_array_reduce_right__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__("25a1"),core_js_modules_es_typed_array_reduce_right__WEBPACK_IMPORTED_MODULE_36___default=__webpack_require__.n(core_js_modules_es_typed_array_reduce_right__WEBPACK_IMPORTED_MODULE_36__),core_js_modules_es_typed_array_reverse__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__("cd26"),core_js_modules_es_typed_array_reverse__WEBPACK_IMPORTED_MODULE_37___default=__webpack_require__.n(core_js_modules_es_typed_array_reverse__WEBPACK_IMPORTED_MODULE_37__),core_js_modules_es_typed_array_set__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__("3c5d"),core_js_modules_es_typed_array_set__WEBPACK_IMPORTED_MODULE_38___default=__webpack_require__.n(core_js_modules_es_typed_array_set__WEBPACK_IMPORTED_MODULE_38__),core_js_modules_es_typed_array_slice__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__("2954"),core_js_modules_es_typed_array_slice__WEBPACK_IMPORTED_MODULE_39___default=__webpack_require__.n(core_js_modules_es_typed_array_slice__WEBPACK_IMPORTED_MODULE_39__),core_js_modules_es_typed_array_some__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__("649e"),core_js_modules_es_typed_array_some__WEBPACK_IMPORTED_MODULE_40___default=__webpack_require__.n(core_js_modules_es_typed_array_some__WEBPACK_IMPORTED_MODULE_40__),core_js_modules_es_typed_array_sort__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__("219c"),core_js_modules_es_typed_array_sort__WEBPACK_IMPORTED_MODULE_41___default=__webpack_require__.n(core_js_modules_es_typed_array_sort__WEBPACK_IMPORTED_MODULE_41__),core_js_modules_es_typed_array_subarray__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__("170b"),core_js_modules_es_typed_array_subarray__WEBPACK_IMPORTED_MODULE_42___default=__webpack_require__.n(core_js_modules_es_typed_array_subarray__WEBPACK_IMPORTED_MODULE_42__),core_js_modules_es_typed_array_to_locale_string__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__("b39a"),core_js_modules_es_typed_array_to_locale_string__WEBPACK_IMPORTED_MODULE_43___default=__webpack_require__.n(core_js_modules_es_typed_array_to_locale_string__WEBPACK_IMPORTED_MODULE_43__),core_js_modules_es_typed_array_to_string__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__("72f7"),core_js_modules_es_typed_array_to_string__WEBPACK_IMPORTED_MODULE_44___default=__webpack_require__.n(core_js_modules_es_typed_array_to_string__WEBPACK_IMPORTED_MODULE_44__),core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__("ddb0"),core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_45___default=__webpack_require__.n(core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_45__),core_js_modules_web_url__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__("2b3d"),core_js_modules_web_url__WEBPACK_IMPORTED_MODULE_46___default=__webpack_require__.n(core_js_modules_web_url__WEBPACK_IMPORTED_MODULE_46__),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__("96cf"),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_47___default=__webpack_require__.n(regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_47__),_home_runner_work_shareLoc_xyz_shareLoc_xyz_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__("d4ec"),_home_runner_work_shareLoc_xyz_shareLoc_xyz_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__("bee2"),_home_runner_work_shareLoc_xyz_shareLoc_xyz_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_50__=__webpack_require__("b85c"),_home_runner_work_shareLoc_xyz_shareLoc_xyz_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_51__=__webpack_require__("1da1"),axios__WEBPACK_IMPORTED_MODULE_52__=__webpack_require__("bc3a"),axios__WEBPACK_IMPORTED_MODULE_52___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_52__),js_yaml__WEBPACK_IMPORTED_MODULE_53__=__webpack_require__("651e"),js_yaml__WEBPACK_IMPORTED_MODULE_53___default=__webpack_require__.n(js_yaml__WEBPACK_IMPORTED_MODULE_53__),spdx_license_list_full__WEBPACK_IMPORTED_MODULE_54__=__webpack_require__("0d52"),spdx_license_list_full__WEBPACK_IMPORTED_MODULE_54___default=__webpack_require__.n(spdx_license_list_full__WEBPACK_IMPORTED_MODULE_54__),MAX_RDF_VERSION="0.3.2";function randId(){return Math.random().toString(36).substr(2,10)}function resolveDOI(e){return _resolveDOI.apply(this,arguments)}function _resolveDOI(){return _resolveDOI=Object(_home_runner_work_shareLoc_xyz_shareLoc_xyz_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_51__["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://doi.org/api/handles/"+t);case 2:if(r=e.sent,!r.ok){e.next=10;break}return e.next=6,r.json();case 6:return n=e.sent,e.abrupt("return",n.values.filter((function(e){return"URL"===e.type}))[0].data.value);case 10:throw new Error("Failed to resolve DOI:"+t);case 11:case"end":return e.stop()}}),e)}))),_resolveDOI.apply(this,arguments)}function dataURLtoFile(e,t){var r=e.split(","),n=r[0].match(/:(.*?);/)[1],a=atob(r[1]),s=a.length,i=new Uint8Array(s);while(s--)i[s]=a.charCodeAt(s);return new File([i],t,{type:n})}function resizeImage(e){var t=e.file,r=e.maxSize,n=new FileReader,a=new Image,s=document.createElement("canvas"),i=function(e){for(var t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]),r=e.split(",")[0].split(":")[1].split(";")[0],n=t.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=t.charCodeAt(s);return new Blob([a],{type:r})},o=function(){var e=a.width,t=a.height;e>t?e>r&&(t*=r/e,e=r):t>r&&(e*=r/t,t=r),s.width=e,s.height=t,s.getContext("2d").drawImage(a,0,0,e,t);var n=s.toDataURL("image/jpeg");return i(n)};return new Promise((function(e,r){t.type.match(/image.*/)?(n.onload=function(t){a.onload=function(){return e(o())},a.src=t.target.result},n.readAsDataURL(t)):r(new Error("Not an image"))}))}function getFullRdfFromDeposit(e){return _getFullRdfFromDeposit.apply(this,arguments)}function _getFullRdfFromDeposit(){return _getFullRdfFromDeposit=Object(_home_runner_work_shareLoc_xyz_shareLoc_xyz_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_51__["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=depositionToRdf(t),e.next=3,fetch(r.config._rdf_file);case 3:if(n=e.sent,!n.ok){e.next=14;break}return e.next=7,n.text();case 7:return a=e.sent,s=js_yaml__WEBPACK_IMPORTED_MODULE_53___default.a.load(a),s.config=s.config||{},Object.assign(s.config,r.config),e.abrupt("return",s);case 14:throw new Error("Failed to fetch RDF file.");case 15:case"end":return e.stop()}}),e)}))),_getFullRdfFromDeposit.apply(this,arguments)}function rdfToMetadata(e,t,r){if(!spdx_license_list_full__WEBPACK_IMPORTED_MODULE_54___default.a[e.license])throw new Error("Invalid license, the license identifier must be one from the SPDX license list (https://spdx.org/licenses/)");if(!e.type)throw new Error("`type` key is not defined in the RDF.");e.covers=e.covers||[];var n,a=e.covers.map((function(e){return e.startsWith("http")?e:new URL(e,t).href})),s=[],i=Object(_home_runner_work_shareLoc_xyz_shareLoc_xyz_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_50__["a"])(a);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.includes("access_token="))throw new Error("Cover URL should not contain access token: "+o);s.push({relation:"hasPart",identifier:o,resource_type:"image-figure",scheme:"url"})}}catch(h){i.e(h)}finally{i.f()}e.links=e.links||[];var c,l=Object(_home_runner_work_shareLoc_xyz_shareLoc_xyz_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_50__["a"])(e.links);try{for(l.s();!(c=l.n()).done;){var _=c.value;if(_.includes("access_token="))throw new Error("Link should not contain access token: "+_);s.push({identifier:"https://shareloc.xyz/#/r/"+encodeURIComponent(_),relation:"references",resource_type:"other",scheme:"url"})}}catch(h){l.e(h)}finally{l.f()}if(!e.config._rdf_file)throw new Error("`_rdf_file` key is not found in the RDF config");if(s.push({identifier:e.config._rdf_file.startsWith("http")?e.config._rdf_file:new URL(e.config._rdf_file,t).href,relation:"isCompiledBy",resource_type:"other",scheme:"url"}),e.documentation){if(e.documentation.includes("access_token="))throw new Error("Documentation URL should not contain access token");s.push({identifier:e.documentation.startsWith("http")?e.documentation:new URL(e.documentation,t).href,relation:"isDocumentedBy",resource_type:"publication-technicalnote",scheme:"url"})}e.authors=e.authors||[];var u=e.authors.map((function(e){return"string"===typeof e?{name:e.split(";")[0],affiliation:""}:{name:e.name.split(";")[0],affiliation:e.affiliation,orcid:e.orcid}})),d='<a href="https://shareloc.xyz/#/p/zenodo:'.concat(encodeURIComponent(e.config._deposit.id),'"><span class="label label-success">Download RDF Package</span></a><br>')+(r||"<p>".concat(r,"</p>")),p=["shareloc.xyz","shareloc.xyz:"+e.type],f={title:e.name,description:d,access_right:"open",license:e.license,upload_type:"other",creators:u,publication_date:(new Date).toISOString().split("T")[0],keywords:p.concat(e.tags),notes:e.description+" (Uploaded via https://shareloc.xyz)",related_identifiers:s,communities:[]};return f}function depositionToRdf(e){var t=e.metadata,r=t.keywords.filter((function(e){return e.startsWith("shareloc.xyz:")}))[0];if(!r)throw new Error("deposit (".concat(e.id,') does not contain a shareloc.xyz type keyword starts with "shareloc.xyz:<TYPE>"'));r=r.replace("shareloc.xyz:","");var n,a=[],s=[],i=null,o=null,c=Object(_home_runner_work_shareLoc_xyz_shareLoc_xyz_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_50__["a"])(t.related_identifiers);try{for(c.s();!(n=c.n()).done;){var l=n.value;if("isCompiledBy"===l.relation&&"url"===l.scheme)if(i=l.identifier,i.startsWith("file://"))i=i.replace("file://",e.links.bucket+"/");else{if(!i.includes("".concat(e.id,"/files/")))throw new Error("Invalid file identifier: "+l.identifier);var _=i.split("/files/")[1];i="".concat(e.links.bucket,"/").concat(_)}else if("hasPart"===l.relation&&"image-figure"===l.resource_type&&"url"===l.scheme){var u=l.identifier;if(u.startsWith("file://"))u=u.replace("file://",e.links.bucket+"/");else{if(!u.includes("".concat(e.id,"/files/")))throw new Error("Invalid file identifier: "+l.identifier);var d=u.split("/files/")[1];u="".concat(e.links.bucket,"/").concat(d)}a.push(u)}else if("references"===l.relation&&"url"===l.scheme&&l.identifier.startsWith("https://shareloc.xyz/#/r/")){var p=l.identifier.replace("https://shareloc.xyz/#/r/","");s.push(decodeURIComponent(p))}else"isDocumentedBy"===l.relation&&"url"===l.scheme&&(o=l.identifier)}}catch(m){c.e(m)}finally{c.f()}var f=document.createElement("div");f.innerHTML=t.description;var h=f.textContent||f.innerText||"";if(!i)throw new Error("Invalid deposit (".concat(e.id,'), rdf.yaml is not defined in the metadata (as part of the "related_identifiers")'));return{id:t.doi,name:t.title,type:r,authors:t.creators,tags:t.keywords.filter((function(e){return"shareloc.xyz"!==e||!e.startsWith("shareloc.xyz:")})).concat(["zenodo"]),description:h,license:"string"===typeof t.license?t.license:t.license.id,documentation:o,covers:a,source:i,links:s,config:{_doi:t.doi,_deposit:e,_rdf_file:i}}}var ZenodoClient=function(){function e(t,r,n){Object(_home_runner_work_shareLoc_xyz_shareLoc_xyz_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_48__["a"])(this,e),this.baseURL=t,this.clientId=r,this.isSandbox=n,this.callbackUrl=encodeURIComponent("https://imjoy.io/login-helper"),this.credential=null;try{var a=localStorage.getItem("zenodo_credential");a&&(this.credential=JSON.parse(a),this.getCredential())}catch(s){console.error("Failed to reset zenodo_credential"),localStorage.removeItem("zenodo_credential")}}return Object(_home_runner_work_shareLoc_xyz_shareLoc_xyz_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_49__["a"])(e,[{key:"getCredential",value:function(){var e=Object(_home_runner_work_shareLoc_xyz_shareLoc_xyz_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_51__["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.credential){e.next=7;break}if(!(this.credential.create_at+1e3*parseInt(this.credential.expires_in)>Date.now()-1e4)){e.next=5;break}return e.abrupt("return",this.credential);case 5:this.credential=null;try{localStorage.removeItem("zenodo_credential")}catch(r){console.error("Failed to reset zenodo_credential")}case 7:if(!t){e.next=20;break}return e.prev=8,e.next=11,this.login();case 11:e.next=20;break;case 13:if(e.prev=13,e.t0=e["catch"](8),!confirm("Failed to login: ".concat(e.t0,", would you like to try again?"))){e.next=19;break}return e.next=18,this.getCredential(t);case 18:return e.abrupt("return",e.sent);case 19:throw e.t0;case 20:return e.abrupt("return",this.credential);case 21:case"end":return e.stop()}}),e,this,[[8,13]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getResourceItems",value:function(){var e=Object(_home_runner_work_shareLoc_xyz_shareLoc_xyz_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_51__["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,s,i,o,c,l,_,u,d,p,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.page,n=t.type,a=t.keywords,s=t.query,i=t.sort,o=t.size,r=r||1,n=n||"all",a=a||[],a.includes("shareloc.xyz")||a.push("shareloc.xyz"),o=o||20,i=i||"mostviewed",c="all"!==n?"&keywords=shareloc.xyz:"+n:"",l=c+(a.length>0?"&"+a.map((function(e){return"keywords="+e})).join("&"):"")+(s?"&q="+s:""),_="".concat(this.baseURL,"/api/records/?communities=shareloc-xyz&sort=").concat(i,"&page=").concat(r,"&size=").concat(o)+l,e.next=12,fetch(_);case 12:return u=e.sent,e.t0=JSON,e.next=16,u.text();case 16:return e.t1=e.sent,d=e.t0.parse.call(e.t0,e.t1),p=d.hits.hits,f=p.map((function(e){try{return depositionToRdf(e)}catch(t){return console.warn(t),null}})),e.abrupt("return",f.filter((function(e){return!!e})));case 21:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"login",value:function(){var e=this;return new Promise((function(t,r){var n=window.open("".concat(e.baseURL,"/oauth/authorize?scope=deposit%3Awrite+deposit%3Aactions&state=CHANGEME&redirect_uri=").concat(e.callbackUrl,"&response_type=token&client_id=").concat(e.clientId),"Login");try{n.focus()}catch(c){return void r("Login window blocked. If you have a popup blocker enabled, please add shareloc.xyz to your exception list.")}var a=120,s=!1,i=setInterval((function(){s?clearInterval(i):n.closed?(clearInterval(i),r("User canceled login")):(a--,a<=0&&(clearInterval(i),n.close(),r("Timeout error")))}),1e3),o=function a(o){if(n===o.source){if(window.removeEventListener("message",a),clearInterval(i),n.close(),o.data.error)return void setTimeout((function(){r(o.data.error)}),1);s=!0,console.log("Successfully logged in",o.data),e.credential=o.data,e.credential.user_id=parseInt(/'id': u'([0-9]+)'/gm.exec(o.data.user)[1]),e.credential.create_at=Date.now(),t(o.data),localStorage.setItem("zenodo_credential",JSON.stringify(e.credential))}};window.addEventListener("message",o,!1)}))}},{key:"createDeposition",value:function(){var e=Object(_home_runner_work_shareLoc_xyz_shareLoc_xyz_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_51__["a"])(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.baseURL,"/api/deposit/depositions?access_token=").concat(this.credential.access_token));case 2:return t=e.sent,e.t0=console,e.next=6,t.json();case 6:return e.t1=e.sent,e.t0.log.call(e.t0,e.t1),r={"Content-Type":"application/json"},e.next=11,fetch("".concat(this.baseURL,"/api/deposit/depositions?access_token=").concat(this.credential.access_token),{method:"POST",body:JSON.stringify({}),headers:r});case 11:return t=e.sent,e.next=14,t.json();case 14:return n=e.sent,e.abrupt("return",n);case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getDeposit",value:function(){var e=Object(_home_runner_work_shareLoc_xyz_shareLoc_xyz_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_51__["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.id?t.id:t,e.next=3,fetch("".concat(this.baseURL,"/api/records/").concat(r),{method:"GET"});case 3:if(n=e.sent,!n.ok){e.next=10;break}return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 10:throw new Error("Failed to get deposit: "+r);case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"retrieve",value:function(){var e=Object(_home_runner_work_shareLoc_xyz_shareLoc_xyz_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_51__["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.id?t.id:t,e.next=3,fetch("".concat(this.baseURL,"/api/deposit/depositions/").concat(r,"?access_token=").concat(this.credential.access_token),{method:"GET"});case 3:if(n=e.sent,!n.ok){e.next=10;break}return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 10:throw new Error("Failed to retrieve deposit: "+r);case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"edit",value:function(){var e=Object(_home_runner_work_shareLoc_xyz_shareLoc_xyz_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_51__["a"])(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.id?t.id:t,n={"Content-Type":"application/json"},e.next=4,fetch("".concat(this.baseURL,"/api/deposit/depositions/").concat(r,"/actions/edit?access_token=").concat(this.credential.access_token),{method:"POST",body:JSON.stringify({}),headers:n});case 4:if(a=e.sent,!a.ok){e.next=11;break}return e.next=8,a.json();case 8:return e.abrupt("return",e.sent);case 11:throw new Error("Failed to edit deposit: "+r);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"discard",value:function(){var e=Object(_home_runner_work_shareLoc_xyz_shareLoc_xyz_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_51__["a"])(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="string"===typeof t?t:t.id,n={"Content-Type":"application/json"},e.next=4,fetch("".concat(this.baseURL,"/api/deposit/depositions/").concat(r,"/actions/discard?access_token=").concat(this.credential.access_token),{method:"POST",body:JSON.stringify({}),headers:n});case 4:if(a=e.sent,!a.ok){e.next=11;break}return e.next=8,a.json();case 8:return e.abrupt("return",e.sent);case 11:throw new Error("Failed to discard deposit: "+r);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"createNewVersion",value:function(){var e=Object(_home_runner_work_shareLoc_xyz_shareLoc_xyz_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_51__["a"])(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="string"===typeof t?t:t.id,n={"Content-Type":"application/json"},e.next=4,fetch("".concat(this.baseURL,"/api/deposit/depositions/").concat(r,"/actions/newversion?access_token=").concat(this.credential.access_token),{method:"POST",body:JSON.stringify({}),headers:n});case 4:if(a=e.sent,!a.ok){e.next=11;break}return e.next=8,a.json();case 8:return e.abrupt("return",e.sent);case 11:throw new Error("Failed to create a new version for deposit: "+r);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateMetadata",value:function(){var e=Object(_home_runner_work_shareLoc_xyz_shareLoc_xyz_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_51__["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.id,console.log("Updating deposition metadata of ".concat(n,":"),r),a={"Content-Type":"application/json"},e.next=5,fetch("".concat(this.baseURL,"/api/deposit/depositions/").concat(n,"?access_token=").concat(this.credential.access_token),{method:"PUT",body:JSON.stringify({metadata:r}),headers:a});case 5:if(s=e.sent,!s.ok){e.next=12;break}return e.next=9,s.json();case 9:return e.abrupt("return",e.sent);case 12:return e.next=14,s.json();case 14:throw i=e.sent,new Error("Failed to update metadata, error: "+JSON.stringify(i.errors));case 16:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"uploadFile",value:function(){var e=Object(_home_runner_work_shareLoc_xyz_shareLoc_xyz_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_51__["a"])(regeneratorRuntime.mark((function e(t,r,n){var a,s,i,o,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.links.bucket,s=r.name,i="".concat(a,"/").concat(s,"?access_token=").concat(this.credential.access_token),"undefined"!==typeof axios__WEBPACK_IMPORTED_MODULE_52___default.a){e.next=14;break}return n&&n(0),e.next=7,fetch(i,{method:"PUT",body:r});case 7:return o=e.sent,n&&n(r.size),e.next=11,o.json();case 11:return e.abrupt("return",e.sent);case 14:return c={headers:{"Content-Type":r.type},onUploadProgress:function(e){if(n)n(e.loaded);else{var t=Math.round(1*e.loaded/r.size*100);console.log("uploading annotation, size: "+Math.round(e.loaded/1e6)+"MB, "+t+"% uploaded.")}}},e.next=17,axios__WEBPACK_IMPORTED_MODULE_52___default.a.put(i,r,c);case 17:return l=e.sent,e.abrupt("return",l.data);case 19:case"end":return e.stop()}}),e,this)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"publish",value:function(){var e=Object(_home_runner_work_shareLoc_xyz_shareLoc_xyz_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_51__["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.id?t.id:t,n={"Content-Type":"application/json"},e.next=4,fetch("".concat(this.baseURL,"/api/deposit/depositions/").concat(r,"/actions/publish?access_token=").concat(this.credential.access_token),{method:"POST",body:JSON.stringify({}),headers:n});case 4:if(a=e.sent,!a.ok){e.next=16;break}return e.next=8,a.json();case 8:if(s=e.sent,!s.submitted||!s.doi_url){e.next=13;break}return e.abrupt("return",s);case 13:throw new Error("Failed to publish, error: "+JSON.stringify(s));case 14:e.next=20;break;case 16:return e.next=18,a.json();case 18:throw i=e.sent,new Error("Failed to publish, error: "+JSON.stringify(i.errors));case 20:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();function compareVersions(v1,comparator,v2){if(comparator="="==comparator?"==":comparator,-1==["==","===","<","<=",">",">=","!=","!=="].indexOf(comparator))throw new Error("Invalid comparator. "+comparator);for(var v1parts=v1.split("."),v2parts=v2.split("."),maxLen=Math.max(v1parts.length,v2parts.length),part1,part2,cmp=0,i=0;i<maxLen&&!cmp;i++)part1=parseInt(v1parts[i],10)||0,part2=parseInt(v2parts[i],10)||0,part1<part2&&(cmp=1),part1>part2&&(cmp=-1);return eval("0"+comparator+cmp)}var anonymousAnimals=["Duck","Rabbit","Ifrit","Ibex","Turtle","Leopard","Gopher","Ferret","Beaver","Chinchilla","Auroch","Dingo","Kraken","Rhino","Python","Cormorant","Platypus","Elephant","Jackal","Dolphin","Capybara","Camel","Chupacabra","Tiger","Kangaroo","Armadillo","Sheep","Panda","Hippo","Cheetah","Manatee","Raccoon","Wombat","Dinosaur","Hyena","Crow","Orangutan","Wolf","Chameleon","Shrew","Penguin","Nyan Cat","Liger","Quagga","Squirrel","Wolverine","Axolotl","Anteater","Frog","Narwhal","Mink","Chipmunk","Buffalo","Monkey","Bat","Giraffe","Iguana","Fox","Coyote","Moose","Otter","Grizzly","Koala","Alligator","Pumpkin","Llama","Badger","Walrus","Skunk","Lemur","Hedgehog"];function debounce(e,t,r){var n;return function(){var a=this,s=arguments,i=function(){n=null,r||e.apply(a,s)},o=r&&!n;clearTimeout(n),n=setTimeout(i,t),o&&e.apply(a,s)}}function concatAndResolveUrl(e,t){for(var r=e.split("/"),n=t.split("/"),a=[],s=0,i=r.length;s<i;s++)if(".."==r[s])a.pop();else{if("."==r[s])continue;a.push(r[s])}for(var o=0,c=n.length;o<c;o++)if(".."==n[o])a.pop();else{if("."==n[o])continue;a.push(n[o])}return a.join("/")}function rel2abs(e,t){if(/^(https?|file|ftps?|mailto|javascript|data:image\/[^;]{2,9};):/i.test(e))return e;if("//"==e.substring(0,2))return location.protocol+e;if("/"==e.charAt(0))return t+e.slice(1);if(/^\s*$/.test(e))return"";e=t+e;while(/\/\.\.\//.test(e=e.replace(/[^/]+\/+\.\.\//g,"")));return e=e.replace(/\.$/,"").replace(/\/\./g,"").replace(/"/g,"%22").replace(/'/g,"%27").replace(/</g,"%3C").replace(/>/g,"%3E"),e}function replaceAllRelByAbs(e,t){var r="[^-a-z0-9:._]";t.endsWith("/")||(t+="/");var n="(?:;|(?!\\d))",a={" ":"(?:\\s|&nbsp;?|&#0*32"+n+"|&#x0*20"+n+")","(":"(?:\\(|&#0*40"+n+"|&#x0*28"+n+")",")":"(?:\\)|&#0*41"+n+"|&#x0*29"+n+")",".":"(?:\\.|&#0*46"+n+"|&#x0*2e"+n+")"},s={},i=a[" "]+"*",o="(?:[^>\"']*(?:\"[^\"]*\"|'[^']*'))*?[^>]*";function c(e){var t=e.toLowerCase();if(a[e])return a[e];for(var r=e.toUpperCase(),i="",o=0;o<e.length;o++){var c=t.charAt(o);if(s[c])i+=s[c];else{var l=r.charAt(o),_=[c];_.push("&#0*"+c.charCodeAt(0)+n),_.push("&#x0*"+c.charCodeAt(0).toString(16)+n),c!=l&&(_.push("&#0*"+l.charCodeAt(0)+n),_.push("&#x0*"+l.charCodeAt(0).toString(16)+n)),_="(?:"+_.join("|")+")",i+=s[c]=_}}return a[e]=i}function l(e,r,n,a){return r+rel2abs(n,t)+a}var _=new RegExp(c("/"),"g"),u=new RegExp(c("."),"g");function d(e,r,n,a){return n=n.replace(_,"/").replace(u,"."),r+rel2abs(n,t)+a}function p(t,n,a,s,i){"string"==typeof t&&(t=new RegExp(t,"gi")),n=r+n,a="string"==typeof a?a:"\\s*=\\s*",s="string"==typeof s?s:"",i="string"==typeof i?"?)("+i:")(";var o=new RegExp("("+n+a+'")([^"'+s+"]+"+i+")","gi"),c=new RegExp("("+n+a+"')([^'"+s+"]+"+i+")","gi"),_=new RegExp("("+n+a+")([^\"'][^\\s>"+s+"]*"+i+")","gi");e=e.replace(t,(function(e){return e.replace(o,l).replace(c,l).replace(_,l)}))}function f(t,n,a,s,i,o){"string"==typeof t&&(t=new RegExp(t,"gi")),n=r+n,s="string"==typeof s?s:"gi";var c,l=new RegExp("("+n+'\\s*=\\s*")([^"]*)',"gi"),_=new RegExp("("+n+"\\s*=\\s*')([^']+)","gi"),u=new RegExp("("+a+')([^"]+)(")',s),p=new RegExp("("+a+")([^']+)(')",s);if("string"==typeof i){o="string"==typeof o?o:"";var f=new RegExp("("+a+")([^\"'][^"+i+"]*"+(o?"?)("+o+")":")()"),s);c=function(e,t,r){return t+r.replace(u,d).replace(p,d).replace(f,d)}}else c=function(e,t,r){return t+r.replace(u,d).replace(p,d)};e=e.replace(t,(function(e){return e.replace(l,c).replace(_,c)}))}return f("<meta"+o+r+'http-equiv\\s*=\\s*(?:"'+c("refresh")+'"'+o+">|'"+c("refresh")+"'"+o+">|"+c("refresh")+"(?:"+c(" ")+o+">|>))","content",c("url")+i+c("=")+i,"i"),p("<"+o+r+"href\\s*="+o+">","href"),p("<"+o+r+"src\\s*="+o+">","src"),p("<object"+o+r+"data\\s*="+o+">","data"),p("<applet"+o+r+"codebase\\s*="+o+">","codebase"),p("<param"+o+r+'name\\s*=\\s*(?:"'+c("movie")+'"'+o+">|'"+c("movie")+"'"+o+">|"+c("movie")+"(?:"+c(" ")+o+">|>))","value"),p(/<style[^>]*>(?:[^"']*(?:"[^"]*"|'[^']*'))*?[^'"]*(?:<\/style|$)/gi,"url","\\s*\\(\\s*","","\\s*\\)"),f("<"+o+r+"style\\s*="+o+">","style",c("url")+i+c("(")+i,0,i+c(")"),c(")")),e}},"034f":function(e,t,r){"use strict";var n=r("85ec"),a=r.n(n);a.a},"03dc":function(e,t,r){},"0e07":function(e,t,r){},"106f":function(e,t,r){"use strict";var n=r("944d"),a=r.n(n);a.a},1246:function(e,t,r){"use strict";var n=r("3dc1"),a=r.n(n);a.a},"133d":function(e){e.exports=JSON.parse('{"site_name":"ShareLoc.XYZ","site_icon":"🔬","author":"IMOD","keywords":"SMLM,PALM,STORM,PAINT,SR,SuperRes,Super resolution,Microscopy,Live Cell Imaging,Bioimaging","description":"ShareLoc--A platform for sharing single-molecule localization microscopy data","twitter_site":"@ImodLab","twitter_creator":"@weioyang","twitter_image":"","og_url":"https://shareloc.xyz","og_title":"ShareLoc.XYZ","og_image":"","og_description":"A platform for sharing single-molecule localization microscopy data","background_image":"","manifest_url":"/manifest.shareloc.json","explore_button_text":"🚀 Explore","subscribe_url":"https://docs.google.com/forms/d/e/1FAIpQLSfQhTjXOuTXZNtalprbsXMPd4ct2ydiMhlPc2lhcs6WY4yo0w/viewform?embedded=true","contribute_url":"/docs/contribute.md","join_partners_url":"","footer":[{"label":"Github Repository","tooltip":"Github Repository","logo":"/static/img/github.png","url":"https://github.com/imodpasteur/shareLoc.xyz"}],"zenodo_config":{"enabled":true,"client_id":"mRJ0Q2ihVpuPhISMPKpFtGakv6LBaKMN8Ap2ruPZ","use_sandbox":true},"rdf_root_repo":"imodpasteur/shareLoc.xyz","enable_comment":true,"splash_title":"ShareLoc.XYZ","splash_subtitle":"A platform for sharing single-molecule localization microscopy data","splash_feature_list":[],"table_view":{"columns":["name","authors","badges","apps"]},"attachment_table":{"columns":[{"field":"name","label":"Name","width":80,"sortable":true},{"field":"description","label":"Description","width":100,"max_length":100,"sortable":true},{"field":"timestamp","label":"Timestamp","class":"tag is-success","sortable":true},{"field":"source","label":"Source","type":"url","text":"open","class":"button is-small"},{"field":"download_url","label":"Download","type":"url","text":"Download","class":"button is-small"}],"detailed":true,"detailed_image":null,"detailed_body":"description"},"footnote":"ShareLoc.XZY is a community efforts for promoting open science","partners":[],"resource_categories":[{"name":"Dataset","type":"dataset","description":"List datasets","outline_color":"rgb(138 138 138)","default_links":["smlm-viewer"],"tag_categories":{"modality":["PALM","STORM","dSTORM","DNA-PAINT","PAINT"],"cell line":["U2OS","U373","COS7","REF52","MDCK","Hela","NIH3T3","yeast","E-coli","Listeria","Archaea"],"structure":["microtubule","mitochondria","actin","nuclear pore","DNA","plasma membrane","neuronal synapse","neuronal axon","vimentin"],"fluorophore":["Alexa-647","Alexa-532","Cy5","Phalloidin-647","CF680","HMSiR","JF-646","PA-JF646","Alexa-555","mEos2","mApple","Cy3b","CF568","Dendra2","PA-mCherry","JF-568","PA-JF568","Nile Red","PA-GFP","Dronpa","Atto-488"],"Labeling strategy":["transient transfection","stable knock-in","endogenous labeling CRISPR","primary antibody","secondary antibody","HaloTag","SNAP-tag","Tetracysteine Tag"],"Target protein":["NUP133","NUP96","TOM22","WGA","ESCRT","FtsZ","alpha-tub","beta-tub","H2","H3","H1","polyE"],"dimension":["2D","3D"],"camera":["EM-CCD","sCMOS"],"reconstruction software":["ThunderSTORM","SMAP","SMOIphot","ZOLA-3D","Picasso","QuickPALM"],"buffer":["GluOx","catalase","MEA","Abbelight Safe Reagent","Idylle Everspark"],"fixation":["4%PFA","1%PFA","PFA+Gluta","Glyoxal","methanol"]}}]}')},"299b":function(e,t,r){},"3dc1":function(e,t,r){},"3ecb":function(e,t,r){"use strict";var n=r("a952"),a=r.n(n);a.a},4213:function(e,t,r){},"4c41":function(e,t,r){"use strict";var n=r("73dd"),a=r.n(n);a.a},"4e3a":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("4160"),r("b64b"),r("159b");var n=r("5530"),a=(r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("2b0e")),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("nav",{staticClass:"navbar is-link is-fixed-top"},[r("div",{staticClass:"navbar-brand"},[r("a",{attrs:{href:"#/"}},[r("span",{staticClass:"site-icon",staticStyle:{cursor:"pointer"}},[e._v(" "+e._s(e.siteConfig.site_icon))]),r("span",{staticClass:"site-title",staticStyle:{cursor:"pointer"}},[e._v(" "+e._s(e.siteConfig.site_name)+" ")])]),r("div",{staticClass:"navbar-burger burger",class:{"is-active":e.showMenu},attrs:{"data-target":"navbarExampleTransparentExample"},on:{click:function(t){e.showMenu=!e.showMenu}}},[r("span"),r("span"),r("span")])]),r("div",{staticClass:"navbar-menu",class:{"is-active":e.showMenu},attrs:{id:"navbarExampleTransparentExample"}},[r("div",{staticClass:"navbar-end"},[e.siteConfig.contribute_url?r("a",{staticClass:"navbar-item",attrs:{href:"#/upload"}},[r("b-icon",{attrs:{icon:"plus"}}),r("span",[e._v("Upload")])],1):e._e(),r("a",{staticClass:"navbar-item",attrs:{href:"#/about"}},[r("b-icon",{attrs:{icon:"information-outline"}}),r("span",[e._v("About")])],1),r("a",{staticClass:"navbar-item",attrs:{id:"imjoy-menu"}})])])]),r("router-view",{staticStyle:{"margin-top":"72px"}})],1)},i=[],o=r("2f62"),c={name:"App",data:function(){return{showMenu:!1}},computed:Object(n["a"])({},Object(o["b"])({siteConfig:function(e){return e.siteConfig}}))},l=c,_=(r("034f"),r("2877")),u=Object(_["a"])(l,s,i,!1,null,null,null),d=u.exports,p=r("9483");Object(p["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});r("d3b7");var f,h=r("8c4f"),m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("section",{staticClass:"hero is-link is-fullheight is-fullheight-with-navbar",staticStyle:{"max-height":"1024px!important",height:"100%","min-height":"380px","background-image":"url(/static/img/bg.jpg)"}},[r("div",{staticClass:"hero-body",staticStyle:{position:"relative"}},[e.selectedPartner?r("img",{staticClass:"background-img",attrs:{src:e.selectedPartner.background_image}}):r("img",{staticClass:"background-img",attrs:{src:e.siteConfig.background_image}}),e.selectedPartner?r("div",{staticClass:"container"},[r("h1",{staticClass:"title is-1"},[e._v(" "+e._s(e.selectedPartner.splash_title)+" ")]),r("h2",{staticClass:"subtitle is-3"},[e._v(" "+e._s(e.selectedPartner.splash_subtitle)+" ")]),e.selectedPartner.splash_feature_list?r("ul",{staticClass:"feature-list"},e._l(e.selectedPartner.splash_feature_list,(function(t){return r("li",{key:t},[e._v(" "+e._s(t)+" ")])})),0):e._e(),r("br"),e.selectedPartner.about_url?r("b-button",{staticStyle:{"text-transform":"none"},attrs:{rounded:""},on:{click:function(t){return e.showAboutPartner(e.selectedPartner)}}},[r("span",{staticClass:"explore-btn"},[e._v("About")])]):e._e(),e._v(" "),r("b-button",{staticStyle:{"text-transform":"none"},attrs:{rounded:""},on:{click:e.enter}},[r("span",{staticClass:"explore-btn"},[e._v(e._s(e.selectedPartner.explore_button_text))])])],1):r("div",{staticClass:"container"},[r("h1",{staticClass:"title is-1"},[e._v(" "+e._s(e.siteConfig.splash_title)+" ")]),r("h2",{staticClass:"subtitle is-3"},[e._v(" "+e._s(e.siteConfig.splash_subtitle)+" ")]),e.siteConfig.splash_feature_list?r("ul",{staticClass:"feature-list"},e._l(e.siteConfig.splash_feature_list,(function(t){return r("li",{key:t},[e._v(" "+e._s(t)+" ")])})),0):e._e(),r("br"),r("b-button",{staticStyle:{"text-transform":"none"},attrs:{rounded:""},on:{click:e.enter}},[r("span",{staticClass:"explore-btn"},[e._v(e._s(e.siteConfig.explore_button_text))])])],1)])]),r("br"),r("section",{staticStyle:{"margin-top":"-30px",opacity:"0.6"}},[r("b-progress",{attrs:{value:e.progress}})],1),r("br"),r("span",{ref:"search_anchor"}),r("resource-item-selector",{attrs:{allItems:e.resourceItems,fullLabelList:e.fullLabelList,tagCategories:e.tagCategories,type:e.selectedCategory&&e.selectedCategory.type,showDisplayMode:e.screenWidth>700,searchTags:e.searchTags},on:{"selection-changed":e.updateResourceItemList,"display-mode-change":e.displayModeChanged,"tags-updated":e.updateQueryTags,"input-change":e.removePartner}}),e.selectedCategory&&"application"===e.selectedCategory.type?r("div",{staticStyle:{"text-align":"center"}},[r("a",{on:{click:function(t){return e.$refs.file_select.click()}}},[e._v("Load application from file")]),r("input",{ref:"file_select",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.fileSelected}})]):e._e(),r("br"),e.selectedItems?r("resource-item-list",{attrs:{allItems:e.selectedItems,displayMode:e.screenWidth>700?e.displayMode:"card"},on:{"show-resource-item-info":e.showResourceItemInfo}}):e._e(),r("br"),r("footer",{staticClass:"footer"},[e.siteConfig.footer?r("div",{staticClass:"columns is-mobile is-centered"},e._l(e.siteConfig.footer,(function(t){return r("div",{key:t.label,staticClass:"column is-one-quarter",staticStyle:{"text-align":"center"}},[r("b-tooltip",{attrs:{label:t.tooltip,position:"is-top"}},[r("a",{attrs:{href:t.url,target:"_blank"}},[r("figure",[r("img",{staticStyle:{"max-height":"55px"},attrs:{src:t.logo}}),r("figcaption",{staticClass:"hide-on-small-screen"},[e._v(" "+e._s(t.label)+" ")])])])])],1)})),0):e._e(),e.siteConfig.footnote?r("div",{staticStyle:{"text-align":"center"}},[r("p",[e._v(e._s(e.siteConfig.footnote))])]):e._e()]),r("modal",{staticStyle:{"max-width":"100%","max-height":"100%","z-index":"9999"},attrs:{name:"window-modal-dialog",resizable:!e.dialogWindowConfig.fullscreen,width:e.dialogWindowConfig.width,height:e.dialogWindowConfig.height,adaptive_size:e.dialogWindowConfig.adaptive_size,minWidth:200,minHeight:150,fullscreen:e.dialogWindowConfig.fullscreen,draggable:".drag-handle",scrollable:!0},on:{opened:e.preventPageScroll,closed:e.restorePageScroll}},[e.selectedDialogWindow?r("div",{staticClass:"dialog-header",class:{"drag-handle":!e.isTouchDevice},on:{dblclick:function(t){return e.maximizeDialogWindow()}}},[r("div",{staticStyle:{position:"absolute",left:"2px","margin-top":"-1px"}},[r("button",{staticClass:"noselect dialog-control-button",staticStyle:{background:"#ff0000c4"},on:{click:function(t){return e.closeDialogWindow(e.selectedDialogWindow)}}},[e._v(" x ")]),e.screenWidth>700?r("button",{staticClass:"noselect dialog-control-button",staticStyle:{background:"#00cdff61"},on:{click:function(t){return e.minimizeDialogWindow()}}},[e._v(" - ")]):e._e(),e.screenWidth>700?r("button",{staticClass:"noselect dialog-control-button",staticStyle:{background:"#00cdff61"},on:{click:function(t){return e.maximizeDialogWindow()}}},[e._v(" "+e._s(e.dialogWindowConfig.fullscreen?"=":"+")+" ")]):e._e()]),r("span",{staticClass:"noselect dialog-title"},[e._v(" "+e._s(e.selectedDialogWindow.name))]),r("b-dropdown",{staticStyle:{position:"absolute",right:"1px"},attrs:{"aria-role":"list",position:"is-bottom-left"}},[r("button",{staticClass:"button",staticStyle:{background:"rgba(0, 205, 255, 0.38)",color:"white",width:"34px"},attrs:{slot:"trigger"},slot:"trigger"},[r("b-icon",{attrs:{icon:"dots-horizontal"}})],1),e._l(e.dialogWindows,(function(t){return r("b-dropdown-item",{key:t.id,attrs:{"aria-role":"listitem"},on:{click:function(r){return e.selectWindow(t)}}},[e._v(e._s(t.name))])}))],2)],1):e._e(),e._l(e.dialogWindows,(function(t){return[r("div",{directives:[{name:"show",rawName:"v-show",value:t===e.selectedDialogWindow,expression:"wdialog === selectedDialogWindow"}],key:t.window_id,staticStyle:{height:"calc(100% - 18px)"}},[r("div",{staticClass:"noselect",staticStyle:{width:"100%",height:"100%"},attrs:{id:t.window_id}})])]}))],2),r("modal",{staticStyle:{"max-width":"100%","max-height":"100%"},attrs:{name:"info-dialog",resizable:!0,minWidth:200,minHeight:150,height:600,width:800,fullscreen:e.infoDialogFullscreen,draggable:".drag-handle",scrollable:!0},on:{opened:e.preventPageScroll,closed:e.restorePageScroll}},[r("div",{staticClass:"dialog-header",class:{"drag-handle":!e.isTouchDevice},on:{dblclick:function(t){return e.maximizeInfoWindow()}}},[r("div",{staticStyle:{position:"absolute",left:"2px","margin-top":"-1px"}},[r("button",{staticClass:"noselect dialog-control-button",staticStyle:{background:"#ff0000c4"},on:{click:function(t){return e.closeInfoWindow()}}},[e._v(" x ")]),e.screenWidth>700?r("button",{staticClass:"noselect dialog-control-button",staticStyle:{background:"#00cdff61"},on:{click:function(t){return e.maximizeInfoWindow()}}},[e._v(" "+e._s(e.infoDialogFullscreen?"=":"+")+" ")]):e._e()]),r("span",{staticClass:"noselect dialog-title"},[e._v(" "+e._s(e.infoDialogTitle))])]),"about"===e.showInfoDialogMode?r("about",{on:{contribute:e.showUploadDialog,join:e.showJoinDialog}}):"upload"===e.showInfoDialogMode?r("upload",{attrs:{"site-config":e.siteConfig,"deposition-id":null}}):"viewer"===e.showInfoDialogMode?r("iframe",{staticStyle:{"padding-bottom":"64px",width:"100%",height:"100%"},attrs:{src:e.viewerUrl,width:"640",height:"852",frameborder:"0",marginheight:"0",marginwidth:"0"}},[e._v("Loading…")]):"edit"===e.showInfoDialogMode?r("div",[r("upload",{attrs:{"site-config":e.siteConfig,"deposition-id":e.currentDepositionId}})],1):"markdown"===e.showInfoDialogMode?r("div",{staticClass:"markdown-container"},[r("markdown",{attrs:{url:e.infoMarkdownUrl}}),e.infoDialogTitle?r("comment-box",{attrs:{title:e.infoDialogTitle}}):e._e()],1):"attachments"===e.showInfoDialogMode&&e.selectedResourceItem?r("div",{staticClass:"markdown-container"},[r("attachments",{attrs:{attachments:e.selectedResourceItem.attachments,focusTarget:e.selectedResourceItem._focus}})],1):"subscribe"===e.showInfoDialogMode?r("iframe",{staticStyle:{"padding-bottom":"64px",width:"100%",height:"100%"},attrs:{src:e.siteConfig.subscribe_url,width:"640",height:"852",frameborder:"0",marginheight:"0",marginwidth:"0"}},[e._v("Loading…")]):"item"===e.showInfoDialogMode&&e.selectedResourceItem?r("resource-item-info",{attrs:{"resource-id":e.selectedResourceItem.id}}):e._e()],1)],1)},g=[],b=(r("a4d3"),r("e01a"),r("99af"),r("4de4"),r("a630"),r("caad"),r("c975"),r("a15b"),r("fb6a"),r("a434"),r("b0c0"),r("ac1f"),r("6062"),r("8a79"),r("2532"),r("3ca3"),r("5319"),r("841c"),r("1276"),r("2ca0"),r("ddb0"),r("2b3d"),r("96cf"),r("1da1")),y=r("b85c"),w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container content-wrapper"},[r("section",{staticClass:"center "},[r("b-field",{staticStyle:{"max-width":"calc(100vw - 10px)"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}}},[r("b-taginput",{staticClass:"searchbar",attrs:{loading:e.loading,type:"is-info","allow-new":"",data:e.filteredTags,"open-on-focus":!0,autocomplete:"",ellipsis:"",icon:"magnify",placeholder:"Type a keyword and press enter"},on:{input:e.updateSelectedTags,typing:e.getFilteredTags},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.option)+" ")]}}]),model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}}),r("b-dropdown",{attrs:{"aria-role":"list",position:"is-bottom-left"}},[r("button",{staticClass:"button tags-button",attrs:{slot:"trigger"},slot:"trigger"},[r("span",[e._v("Tags")]),r("b-icon",{attrs:{icon:"menu-down"}})],1),r("div",{staticClass:"dropdown-panel",attrs:{"aria-role":"listitem"}},[r("div",{staticClass:"container",staticStyle:{"max-width":"100%"}},[r("div",{staticClass:"field"},[r("b-switch",{model:{value:e.matchingAll,callback:function(t){e.matchingAll=t},expression:"matchingAll"}},[e._v("Match: "+e._s(e.matchingAll?" All":"Any"))]),r("b-switch",{model:{value:e.freeTextMode,callback:function(t){e.freeTextMode=t},expression:"freeTextMode"}},[e._v("Free Text: "+e._s(e.freeTextMode?" Enabled":"Disabled"))])],1),e._l(e.categories.grouped,(function(t,n){return r("div",{key:n,staticClass:"column"},[e._v(" "+e._s(n)+": "),r("br"),e._l(t,(function(t){return r("a",{key:t,staticStyle:{display:"inline-block"},on:{click:function(r){return e.addTagSelection(t)}}},[r("b-tag",{staticStyle:{cursor:"pointer"},attrs:{rounded:""}},[e._v(e._s(t))])],1)}))],2)})),r("div",{staticClass:"column"},[Object.keys(e.categories.grouped).length>0?r("span",[e._v("other: "),r("br")]):e._e(),e._l(e.categories.other,(function(t){return r("a",{key:t,staticStyle:{display:"inline-block"},on:{click:function(r){return e.addTagSelection(t)}}},[r("b-tag",{staticStyle:{cursor:"pointer"},attrs:{rounded:""}},[e._v(e._s(t))])],1)}))],2)],2)])]),e.showDisplayMode?r("b-field",{staticClass:"display-mode-btn"},[r("p",{staticClass:"control"},[r("b-tooltip",{attrs:{label:"Display mode: list",position:"is-top"}},[r("button",{staticClass:"button",class:{"is-primary":"list"===e.displayMode},staticStyle:{top:"1px",height:"34px"},on:{click:function(t){return e.switchDisplayMode("list")}}},[r("b-icon",{attrs:{icon:"format-list-bulleted"}})],1)])],1),r("p",{staticClass:"control"},[r("b-tooltip",{attrs:{label:"Display mode: card",position:"is-top"}},[r("button",{staticClass:"button",class:{"is-primary":"card"===e.displayMode},staticStyle:{top:"1px",height:"34px"},on:{click:function(t){return e.switchDisplayMode("card")}}},[r("b-icon",{attrs:{icon:"view-grid"}})],1)])],1)]):e._e()],1),r("b-field")],1)])},v=[],E=(r("a623"),r("d81d"),r("45fc"),r("498a"),r("025e")),O={name:"ResourceItemSelector",props:{allItems:{type:Array,default:null},type:{type:String,default:null},fullLabelList:{type:Array,default:null},tagCategories:{type:Object,default:null},showDisplayMode:{type:Boolean,default:!1},searchTags:{type:Array,default:null}},data:function(){return{selectedTags:[],filteredTags:[],loading:!1,matchingAll:!0,freeTextMode:!0,displayMode:"card"}},watch:{type:function(e){this.allItems&&(this.type=e,this.applySearch(this.selectedTags))},selectedTags:function(e){this.applySearch(e)},allItems:function(){this.applySearch(this.selectedTags)},searchTags:function(e){var t=this;if(e){var r=e&&e.length==this.selectedTags.length&&e.every((function(e,r){return e===t.selectedTags[r]}));r||(e=e.filter((function(e){return e&&""!=e.trim()})),this.selectedTags=Array.from(new Set(e)))}else this.selectedTags=[]}},mounted:function(){this.filteredTags=this.fullLabelList},computed:{categories:function(){if(!this.tagCategories)return{grouped:{},other:this.fullLabelList};var e,t={},r=[],n=this.selectedTags.map((function(e){return e.toLowerCase()})),a=Object(y["a"])(this.fullLabelList);try{for(a.s();!(e=a.n()).done;){var s=e.value;if(!(n.indexOf(s.toLowerCase())>=0)){for(var i=!1,o=0,c=Object.keys(this.tagCategories);o<c.length;o++){var l,_=c[o],u=Object(y["a"])(this.tagCategories[_]);try{for(u.s();!(l=u.n()).done;){var d=l.value;if(d.toLowerCase()===s.toLowerCase()){t[_]||(t[_]=[]),t[_].push(d),i=!0;break}}}catch(p){u.e(p)}finally{u.f()}}i||r.push(s)}}}catch(p){a.e(p)}finally{a.f()}return{grouped:t,other:r}}},methods:{applySearch:function(e){var t=this;this.allItems&&(this.$emit("tags-updated",e),this.loading=!0,Object(E["e"])((function(){var r,n=e.filter((function(e){return t.fullLabelList.indexOf(e.toLowerCase())>=0})),a=t.type?t.allItems.filter((function(e){return e.type===t.type})):t.allItems;r=e.length<=0?a:a.filter((function(r){var a;a=t.matchingAll?n.length>0&&n.every((function(e){return r.allLabels.includes(e.toLowerCase())})):n.length>0&&n.some((function(e){return r.allLabels.includes(e.toLowerCase())}));var s=function(e){return e=e.replace(/-/g,"").toLowerCase(),r.name.replace(/-/g,"").toLowerCase().includes(e)||r.description&&r.description.replace(/-/g,"").toLowerCase().split(/[ .:;?!~,`"&|()<>{}[\]\r\n/\\]+/).includes(e)||r.authors&&r.authors.some((function(t){return t.toLowerCase().includes(e)}))||r.apps&&r.apps.some((function(t){return t.name&&t.name.toLowerCase().includes(e)}))};return(!t.type||r.type===t.type)&&(a||t.freeTextMode&&e.every(s))})),t.$emit("selection-changed",r),t.loading=!1,t.$forceUpdate()}),400)())},switchDisplayMode:function(e){this.displayMode!==e&&(this.displayMode=e,this.$emit("display-mode-change",e))},updateSelectedTags:function(){var e=this;this.$emit("input-change"),this.filteredTags=this.fullLabelList.filter((function(t){return e.selectedTags.indexOf(t)<0}))},getFilteredTags:function(e){this.filteredTags=this.fullLabelList.filter((function(t){return t.toLowerCase().indexOf(e.toLowerCase())>=0}))},addTagSelection:function(e){this.selectedTags.indexOf(e)<0&&this.selectedTags.push(e)}}},x=O,k=(r("1246"),Object(_["a"])(x,w,v,!1,null,"5aaa56fb",null)),D=k.exports,C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"resource-item-list"},[r("div",{staticClass:"container content-wrapper"},["card"===e.displayMode?r("div",{staticClass:"columns is-multiline"},[e._l(e.allItems.slice((e.currentPage-1)*e.itemsPerPage,e.currentPage*e.itemsPerPage),(function(t){return r("div",{key:t.id,staticClass:"column is-4-desktop is-3-widescreen is-half-tablet resource-card"},[r("resource-item-card",{attrs:{resourceItem:t},on:{"show-info":e.showResourceItemInfo,"select-tag":function(t){return e.$emit("select-tag",t)}}})],1)})),e.allItems&&0===e.allItems.length?r("span",{staticClass:"column",staticStyle:{"text-align":"center"}},[e._v("The list is empty.")]):e._e()],2):r("b-table",{attrs:{data:e.allItems,detailed:!0,"show-detail-icon":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e.siteConfig.table_view.columns.includes("name")?r("b-table-column",{attrs:{label:"Name",width:"20",field:"name",sortable:""}},[r("a",{on:{click:function(r){return e.showResourceItemInfo(t.row)}}},[e._v(" "+e._s(t.row.name)+" ")])]):e._e(),e.siteConfig.table_view.columns.includes("authors")?r("b-table-column",{attrs:{label:"Author(s)",width:"20",sortable:"",field:"authors"}},[r("span",[e._v(" "+e._s(t.row.authors.join(", "))+" ")])]):e._e(),e.siteConfig.table_view.columns.includes("badges")?r("b-table-column",{attrs:{label:"Badges",width:"50",field:"badges",sortable:""}},[t.row.badges?r("div",{staticClass:"badges"},e._l(t.row.badges,(function(t){return r("a",{key:t.label,staticClass:"badge",attrs:{href:t.url,target:"_blank"},on:{click:function(e){!t.url&&t.run&&t.run()}}},[t.icon?r("img",{attrs:{alt:t.label,src:t.icon}}):r("b-taglist",{attrs:{attached:"",rounded:""}},[r("b-tag",{attrs:{type:t.label_type||"is-dark"}},[e._v(e._s(t.label))]),t.ext?r("b-tag",{attrs:{type:t.ext_type||"is-success"}},[e._v(e._s(t.ext))]):e._e()],1)],1)})),0):e._e()]):e._e(),e.siteConfig.table_view.columns.includes("apps")?r("b-table-column",{attrs:{label:"Apps",width:"30",field:"apps",sortable:""}},[r("app-icons",{attrs:{apps:t.row.apps}})],1):e._e()]}},{key:"detail",fn:function(t){return[r("resource-item-card",{attrs:{resourceItem:t.row},on:{"show-info":e.showResourceItemInfo}})]}}])}),r("b-pagination",{staticClass:"resource-pagination",attrs:{total:e.totalItems,current:e.currentPage,"range-before":3,"range-after":1,"per-page":e.itemsPerPage,"icon-prev":"arrow-left","icon-next":"arrow-right","aria-next-label":"Next page","aria-previous-label":"Previous page","aria-page-label":"Page","aria-current-label":"Current page"},on:{"update:current":function(t){e.currentPage=t}}})],1)])},I=[],P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.apps?r("div",{staticClass:"app-icons"},[e._l(e.apps,(function(t){return[r("b-tooltip",{key:t.name,class:{"hover-show":t.show_on_hover&&e.enableHover},attrs:{label:t.name,position:"is-bottom"}},[r("b-button",{staticClass:"is-small action-btn",attrs:{rounded:"",tag:"a",href:t.url,target:"_blank"},on:{click:function(e){!t.url&&t.run&&t.run()}}},[t.icon&&"extension"!==t.icon?t.icon.startsWith("http")?r("img",{staticClass:"app-icon",attrs:{src:t.icon,alt:t.name}}):r("b-icon",{attrs:{icon:t.icon,size:"is-small"}}):r("b-icon",{attrs:{icon:"puzzle",size:"is-small"}})],1)],1)]}))],2):e._e()},M=[],R={name:"AppIcons",props:{apps:{type:Array,default:null},enableHover:{type:Boolean,default:!1}}},j=R,L=(r("b35e"),Object(_["a"])(j,P,M,!1,null,"3c22306a",null)),T=L.exports,A=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"resource-item-card"},[r("div",{staticClass:"card is-shady",style:{"box-shadow":e.boxShadow}},[r("div",{staticClass:"card-image"},[e.resourceItem.cover_images&&e.resourceItem.cover_images.length>0?r("b-carousel",{attrs:{indicator:e.resourceItem.cover_images.length>1,arrow:e.resourceItem.cover_images.length>1,"pause-info":!1}},e._l(e.resourceItem.cover_images,(function(t){return r("b-carousel-item",{key:t,staticClass:"carousel-image"},[r("img",{staticClass:"cover-image",attrs:{loading:"lazy",src:t,alt:e.resourceItem.name}})])})),1):r("img",{staticClass:"cover-image",staticStyle:{"background-color":"black",width:"100%",height:"160px"}})],1),r("div",{staticClass:"card-content"},[r("div",{staticClass:"content"},[r("h4",{staticClass:"resource-item-title",on:{click:e.showResourceItemInfo}},["img"===e.icon.type?r("img",{staticClass:"item-icon",staticStyle:{"border-radius":"4px",background:"#ffffffd0"},attrs:{src:e.icon.src}}):"animal"===e.icon.type?r("img",{staticClass:"item-icon",staticStyle:{"border-radius":"50%",background:"#167cf0b8"},attrs:{src:"/static/anonymousAnimals/"+e.icon.src+".png"}}):r("b-icon",{staticClass:"item-icon",attrs:{icon:e.icon.src}}),r("span",[e._v(e._s(e.resourceItem.name.slice(0,30)+(e.resourceItem.name.length>30?"...":"")))])],1),r("div",{staticClass:"buttons floating-buttons"},[r("app-icons",{attrs:{apps:e.resourceItem.apps,enableHover:!e.isTouchDevice}})],1),r("span",{staticClass:"authors"},[e._v(" "+e._s(e.resourceItem.authors&&e.resourceItem.authors.length>0?"by "+e.etAl(e.resourceItem.authors):"")+" ")]),e.resourceItem.description?r("p",{staticClass:"resource-item-description"},[e._v(" "+e._s(e.resourceItem.description.slice(0,100)+(e.resourceItem.description.length>100?"...":""))+" ")]):e._e(),r("span",{staticStyle:{"margin-top":"3px",display:"block"}},e._l(e.resourceItem.tags,(function(t){return r("span",{key:t},[r("b-tag",{staticStyle:{cursor:"pointer"},attrs:{rounded:""},nativeOn:{click:function(r){return e.selectTag(t)}}},[e._v(e._s(t))])],1)})),0),r("badges",{staticClass:"badges",attrs:{badges:e.resourceItem.badges}})],1)])])])},U=[],W=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.badges?r("div",{staticClass:"badges"},e._l(e.badges,(function(t){return r("a",{key:t.label,staticClass:"badge",attrs:{href:t.url,target:"_blank"},on:{click:function(e){!t.url&&t.run&&t.run()}}},[t.icon?r("img",{staticClass:"badge-img",attrs:{alt:t.label,src:t.icon}}):r("b-taglist",{attrs:{attached:"",rounded:""}},[r("b-tag",{attrs:{type:t.label_type||"is-dark"}},[e._v(e._s(t.label))]),t.ext?r("b-tag",{attrs:{type:t.ext_type||"is-success"}},[e._v(e._s(t.ext))]):e._e()],1)],1)})),0):e._e()},S=[],B={name:"Badges",props:{badges:{type:Array,default:null}}},z=B,K=(r("cf4e"),Object(_["a"])(z,W,S,!1,null,"f6922e12",null)),q=K.exports,F=r("133d"),$={},N=Object(y["a"])(F.resource_categories);try{for(N.s();!(f=N.n()).done;){var J=f.value;$[J.type]=J.outline_color}}catch(Zt){N.e(Zt)}finally{N.f()}var G=function(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}(),H={name:"ModelCard",props:{resourceItem:{type:Object,default:null}},data:function(){return{isTouchDevice:G}},components:{badges:q,"app-icons":T},computed:{boxShadow:function(){var e=$[this.resourceItem.type]||"rgba(0,0,0,.2)";return"0 3px 1px -2px ".concat(e,", 0 2px 2px 0 ").concat(e,", 0 1px 5px 0 rgba(0,0,0,.12)")},icon:function(){if(this.resourceItem.icon)return this.resourceItem.icon.startsWith("http")?{type:"img",src:this.resourceItem.icon}:E["b"].indexOf(this.resourceItem.icon)>=0?{type:"animal",src:this.resourceItem.icon}:{type:"material",src:this.resourceItem.icon};var e=0;if(this.resourceItem.name)for(var t=0;t<this.resourceItem.name.length;t++)e+=this.resourceItem.name.charCodeAt(t);var r=E["b"][e%E["b"].length];return{type:"animal",src:r}}},methods:{etAl:function(e){return e=e.map((function(e){return e.split(";")[0]})),e.length<3?e.join(", "):e.slice(0,3).join(", ")+" et al."},showResourceItemInfo:function(){this.$emit("show-info",this.resourceItem)},selectTag:function(e){this.$emit("select-tag",e)}}},Y=H,Z=(r("b133"),Object(_["a"])(Y,A,U,!1,null,"67ce27d6",null)),X=Z.exports,Q=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);a["default"].component("label-selector",{props:["all-labels"],template:document.getElementById("label-selector")});var V={name:"ResourceItemList",components:{"resource-item-card":X,"app-icons":T},props:{allItems:{type:Array,default:null},displayMode:{type:String,default:"card"}},computed:{totalItems:function(){return this.allItems?this.allItems.length:0},filteredItems:function(){var e=this,t=this.allItems.filter((function(e){return e.cover_image})),r=t.concat(this.allItems.filter((function(e){return!e.cover_image})));return r.filter((function(t){return e.filters.every((function(e){return t.allLabels.includes(e)}))}))}},data:function(){return{isSafari:Q,siteConfig:F,currentPage:1,itemsPerPage:16}},mounted:function(){},beforeDestroy:function(){},methods:{showResourceItemInfo:function(e){this.$emit("show-resource-item-info",e)}}},ee=V,te=(r("dde9"),Object(_["a"])(ee,C,I,!1,null,"3ca77ea3",null)),re=te.exports,ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.resourceItem?r("div",{staticClass:"resource-item-info"},[e.resourceItem.apps?r("section",{staticStyle:{"margin-bottom":"10px"}},[r("app-icons",{attrs:{apps:e.resourceItem.apps}}),e._v(" "),r("badges",{attrs:{badges:e.resourceItem.badges}})],1):e._e(),e.resourceItem.cover_images&&e.resourceItem.cover_images.length>0?r("b-carousel",{staticStyle:{"max-width":"512px"},attrs:{indicator:e.resourceItem.cover_images.length>1,arrow:e.resourceItem.cover_images.length>1,"pause-info":!1}},e._l(e.resourceItem.cover_images,(function(t){return r("b-carousel-item",{key:t},[r("figure",{staticClass:"image is-16by9"},[r("img",{staticClass:"cover-image",attrs:{loading:"lazy",src:t,alt:e.resourceItem.name,"data-target":"modal-image2"}})])])})),1):e._e(),r("span",{staticClass:"authors"},[e._v(" "+e._s(e.resourceItem.authors&&e.resourceItem.authors.length>0?"Author(s): "+e.resourceItem.authors.join(","):"")+" ")]),r("br"),r("span",{staticStyle:{"margin-top":"3px",display:"block"}},e._l(e.resourceItem.tags,(function(t){return r("span",{key:t},[r("b-tag",{staticStyle:{cursor:"pointer"},attrs:{rounded:""}},[e._v(e._s(t))])],1)})),0),r("br"),e.resourceItem.description?r("p",[e._v(" "+e._s(e.resourceItem.description.slice(0,e.maxDescriptionLetters))+" "),e.resourceItem.description.length>e.maxDescriptionLetters?r("a",{on:{click:function(t){e.maxDescriptionLetters=e.resourceItem.description.length}}},[e._v("...show all.")]):e._e()]):e._e(),r("div",{staticClass:"markdown-body"},[e.resourceItem.docs?r("markdown",{attrs:{baseUrl:e.resourceItem.baseUrl,content:e.resourceItem.docs.slice(0,e.maxDocsLetters)}}):e._e(),e.resourceItem.docs&&e.resourceItem.docs.length>e.maxDocsLetters?r("a",{staticStyle:{color:"#0366d6"},on:{click:function(t){e.maxDocsLetters=e.resourceItem.docs.length}}},[e._v("+ click here to see the full documentation")]):e._e(),r("br"),e.formatedCitation?r("h3",{attrs:{id:"citation"}},[e._v("Citation")]):e._e(),e.formatedCitation?r("ul",{staticClass:"citation"},e._l(e.formatedCitation,(function(t){return r("li",{key:t.text},[e._v(" "+e._s(t.text)+" "),t.url?r("a",{attrs:{href:t.url,target:"_blank"}},[e._v("["+e._s(t.url_text)+"]")]):e._e()])})),0):e._e()],1)],1):e._e()},ae=[],se=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"markdown-body"},[r("b-loading",{attrs:{"is-full-page":!1,active:e.loading,"can-cancel":!1},on:{"update:active":function(t){e.loading=t}}}),e.docs?r("div",{domProps:{innerHTML:e._s(e.docs)}}):e._e()],1)},ie=[],oe=(r("9911"),r("e4cb"),r("2c43"),r("0e54")),ce=r.n(oe),le=r("c0c4"),_e=r.n(le),ue=r("1487"),de=r.n(ue),pe={name:"Markdown",props:{baseUrl:{type:String,default:""},content:{type:String,default:null},url:{type:String,default:null}},data:function(){return{docs:null,loading:!1}},created:function(){var e=new ce.a.Renderer;e.link=function(e,t,r){var n=ce.a.Renderer.prototype.link.call(this,e,t,r);return n.replace("<a","<a target='_blank' ")},e.image=function(e,t,r){var n=ce.a.Renderer.prototype.image.call(this,e,t,r);return n.replace("/./","/")},ce.a.setOptions({renderer:e,highlight:function(e){return de.a.highlightAuto(e).value}}),_e.a.addHook("afterSanitizeAttributes",(function(e){"target"in e&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer"))}))},watch:{content:function(e){this.docs=_e.a.sanitize(Object(E["i"])(ce()(e),this.baseUrl)),this.loading=!1},baseUrl:function(e){this.baseUrl=e,this.docs=_e.a.sanitize(Object(E["i"])(ce()(this.content),this.baseUrl))},url:function(e){e&&this.showDocsUrl(e)}},mounted:function(){ce.a.setOptions({baseUrl:this.baseUrl}),this.content?this.docs=_e.a.sanitize(Object(E["i"])(ce()(this.content),this.baseUrl)):this.url&&this.showDocsUrl(this.url)},methods:{showDocsUrl:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var n,a,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.loading=!0,t.docs="@loading...",r.prev=2,r.next=5,fetch(e);case 5:if(n=r.sent,200!=n.status){r.next=13;break}return r.next=9,n.text();case 9:a=r.sent,e.endsWith(".md")?(s=e.split("/"),i=s.slice(0,s.length-1).join("/"),t.docs=_e.a.sanitize(Object(E["i"])(ce()(a),i)),t.loading=!1):t.docs=_e.a.sanitize(ce()("```\n"+a+"\n```\n")),r.next=14;break;case 13:t.docs="Oops! Failed to load from "+e;case 14:r.next=19;break;case 16:r.prev=16,r.t0=r["catch"](2),t.docs="Oops! Failed to load from "+e;case 19:return r.prev=19,t.loading=!1,r.finish(19);case 22:case"end":return r.stop()}}),r,null,[[2,16,19,22]])})))()}}},fe=pe,he=Object(_["a"])(fe,se,ie,!1,null,"3dae94c1",null),me=he.exports,ge={name:"ResourceItemInfo",props:["resourceId"],components:{markdown:me,badges:q,"app-icons":T},data:function(){return{resourceItem:null,maxDescriptionLetters:100,maxDocsLetters:500,showSource:!1}},mounted:function(){this.init()},computed:Object(n["a"])({formatedCitation:function(){var e=this.resourceItem.cite;if(!e)return null;this.resourceItem.cite&&!Array.isArray(this.resourceItem.cite)&&(e=[this.resourceItem.cite]);var t,r=[],n=Object(y["a"])(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if("string"===typeof a)r.push({text:a});else{var s=a.url,i="link";a.doi&&(s=a.doi.startsWith("http")?a.doi:"https://doi.org/"+a.doi,i="doi"),r.push({text:a.text,url:s,url_text:i})}}}catch(Zt){n.e(Zt)}finally{n.f()}return r}},Object(o["b"])({siteConfig:function(e){return e.siteConfig},loadedUrl:function(e){return e.loadedUrl},resourceItems:function(e){return e.resourceItems}})),methods:{init:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var r,n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.loadedUrl){t.next=5;break}return r=e.siteConfig.rdf_root_repo,n=e.siteConfig.manifest_url,t.next=5,e.$store.dispatch("fetchResourceItems",{repo:r,manifest_url:n});case 5:if(a=e.resourceItems.filter((function(t){return t.id===e.resourceId}))[0],a){t.next=9;break}return alert("Item not found: "+e.resourceId),t.abrupt("return");case 9:e.resourceItem=a,s=function(){if(e.resourceItem._focus){var t=document.getElementById(e.resourceItem._focus);t&&(t.parentNode.scrollTop=t.offsetTop-40)}},e.getDocs(e.resourceItem).then(s);case 12:case"end":return t.stop()}}),t)})))()},getDocs:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var n,a,s,i,o,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.docs="@loading...",r.prev=1,n=e.documentation.startsWith("http")?e.documentation:Object(E["c"])(e.root_url,e.documentation),n.includes("github.")&&(n=n+"?"+Object(E["g"])()),r.next=6,fetch(n);case 6:if(a=r.sent,200!=a.status){r.next=15;break}return r.next=10,a.text();case 10:s=r.sent,t.resourceItem.documentation.startsWith("http")?(c=t.resourceItem.documentation.split("/"),i=c.slice(0,c.length-1).join("/")):(o=(t.resourceItem.root_url+"/"+t.resourceItem.documentation).split("/"),i=o.slice(0,o.length-1).join("/")),e.documentation.endsWith(".md")?(e.baseUrl=i,e.docs=s):e.documentation&&(e.docs="### [Documentation](".concat(e.documentation,")")),r.next=16;break;case 15:e.docs=null;case 16:t.$forceUpdate(),r.next=23;break;case 19:r.prev=19,r.t0=r["catch"](1),e.docs=null,t.$forceUpdate();case 23:return r.prev=23,t.resourceItem.docs&&(t.maxDocsLetters=t.resourceItem.docs.split("\n").slice(0,5).join("\n").length),r.finish(23);case 26:case"end":return r.stop()}}),r,null,[[1,19,23,26]])})))()}}},be=ge,ye=(r("4c41"),Object(_["a"])(be,ne,ae,!1,null,"ed5dd974",null)),we=ye.exports,ve=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"upload"},[e.client.isSandbox?r("b-notification",{attrs:{type:"is-warning","has-icon":"","aria-close-label":"Close notification",role:"alert"}},[e._v(" You are using the development mode of the upload feature, this means files will be uploaded the sandbox version of Zenodo (https://sandbox.zenodo.org). The uploaded files can be removed from Zenodo at anytime without notice. ")]):e._e(),r("b-steps",{attrs:{position:"left","has-navigation":!1,"label-position":"right"},model:{value:e.stepIndex,callback:function(t){e.stepIndex=t},expression:"stepIndex"}},[r("b-step-item",{attrs:{disabled:e.rdfYaml,label:"Start",icon:"file"}},[r("b-field",{attrs:{label:"Option 1: Create a new deposit",expanded:""}},[r("b-button",{staticClass:"button is-fullwidth",staticStyle:{"text-transform":"none"},attrs:{expanded:""},on:{click:e.startUpload}},[e._v("Start Upload")])],1),r("b-field",{attrs:{label:"Option 2: Update an existing deposit",message:"A URI can be a Zenodo DOI, Zenodo URL or Github URL to the RDF file"}},[r("b-input",{attrs:{type:"url",placeholder:"Type a DOI or URL here"},model:{value:e.URI4Load,callback:function(t){e.URI4Load=t},expression:"URI4Load"}})],1),r("b-button",{staticClass:"button is-fullwidth",staticStyle:{"text-transform":"none"},attrs:{expanded:""},on:{click:function(t){return e.loadRdfFromURL(e.URI4Load)}}},[e._v("Load")])],1),r("b-step-item",{attrs:{label:"Edit",icon:"pencil",disabled:!e.rdfYaml}},[1==e.stepIndex?r("section",[r("dataset",{attrs:{"init-rdf":e.rdf,files:e.rdfFiles},on:{submit:e.submitRDF}})],1):e._e()]),r("b-step-item",{attrs:{label:"Upload",icon:"upload"}},[e.rdfYaml?r("b-field",{staticStyle:{height:"260px",overflow:"auto"},attrs:{label:"RDF content"}},[e.rdfYaml?r("markdown",{attrs:{baseUrl:"",content:e.formatedModelYaml}}):e._e()],1):e._e(),e.zipPackage?r("b-field",{attrs:{label:"Files"}},[r("b-taglist",{attrs:{attached:"",rounded:""}},e._l(e.zipPackage.files,(function(t,n){return r("b-tag",{key:n,attrs:{rounded:""}},[e._v(e._s(n))])})),1)],1):e.editedFiles?r("b-field",{attrs:{label:"Files"}},[r("b-taglist",{attrs:{attached:"",rounded:""}},e._l(e.editedFiles,(function(t){return r("b-tag",{key:t.name,attrs:{rounded:""}},[e._v(e._s(t.name))])})),1)],1):e._e(),r("div",{staticClass:"column"},[e.zipPackage||e.editedFiles?r("b-button",{staticClass:"button is-fullwidth",staticStyle:{"text-transform":"none"},attrs:{expanded:"","icon-left":"download"},on:{click:function(t){return e.exportPackage()}}},[e._v("Export package locally (Optional)")]):e._e()],1),r("br"),e.similarDeposits&&e.similarDeposits.length>0?r("div",[r("label",{staticClass:"label"},[e._v("Similar Existing Items")]),r("p",[e._v(" The following published deposit(s) are similar to yours (matched by name), please make sure you are using distinctive names to avoid confusion to the users. ")]),e._l(e.similarDeposits,(function(t){return r("b-notification",{key:t.id,attrs:{type:t.name===e.rdf.name?"is-danger":null,"aria-close-label":"Close notification"}},[r("h1",[r("a",{attrs:{href:t.config._deposit.links.html,target:"_blank"}},[e._v(e._s(t.name))])]),r("p",[e._v(e._s(t.description.slice(0,200)))]),r("p",[e._v(" Authors: "+e._s(t.authors&&t.authors.map((function(e){return e.name.split(";")[0]})).join(","))+" ")]),r("p",[e._v("Uploaded: "+e._s(t.config._deposit.updated))]),r("br"),r("div",{staticClass:"columns"},[e.userId&&t.config._deposit&&t.config._deposit.owners.includes(e.userId)?r("b-button",{staticClass:"column button is-primary is-light is-fullwidth",attrs:{expanded:"","icon-left":"autorenew"},on:{click:function(r){return e.createOrUpdateDeposit(t.config._deposit.id,!1)}}},[r("span",[e._v("Update as a new version")])]):e._e()],1)])})),r("b-button",{staticClass:"button is-fullwidth",class:{"is-primary":e.sameNameDeposits&&e.sameNameDeposits.length>0},staticStyle:{"text-transform":"none"},attrs:{expanded:"","icon-left":"arrow-left"},on:{click:function(t){e.stepIndex=1}}},[e._v("Go back to rename")])],2):e._e(),r("br"),r("b-field",[r("b-switch",{model:{value:e.requestedJoinCommunity,callback:function(t){e.requestedJoinCommunity=t},expression:"requestedJoinCommunity"}},[e._v(" Apply for listing in the "),r("a",{attrs:{href:e.client.baseURL+"/communities/shareloc-xyz/",target:"_blank"}},[e._v("ShareLoc.XYZ community list")])])],1),e.uploadStatus?r("p",[e._v(e._s(e.uploadStatus))]):e._e(),e.uploadProgress?r("b-progress",{attrs:{type:"is-primary",value:e.uploadProgress,size:"is-small",expanded:""}}):e._e(),r("div",{staticClass:"columns"},[e.client&&(e.zipPackage||e.editedFiles)?r("div",{staticClass:"column"},[r("b-button",{staticClass:"button is-primary is-light is-fullwidth",attrs:{disabled:e.uploadProgress||e.sameNameDeposits&&e.sameNameDeposits.length>0,expanded:"","icon-left":"plus"},on:{click:function(t){return e.createOrUpdateDeposit()}}},[r("span",[e._v("Upload as new deposit")])])],1):e._e(),e.client&&(e.zipPackage||e.editedFiles)&&e.depositId?r("div",{staticClass:"column"},[r("b-button",{staticClass:"button is-primary is-light is-fullwidth",attrs:{disabled:e.uploadProgress,expanded:"","icon-left":"autorenew"},on:{click:function(t){return e.createOrUpdateDeposit(e.depositId,!1)}}},[r("span",[e._v("Add new version to deposit")])])],1):e._e()])],1),r("b-step-item",{attrs:{label:"Publish",icon:"share-variant",disabled:""}},[e.publishedUrl?r("b-notification",{attrs:{type:"is-success","has-icon":"","aria-close-label":"Close notification"}},[r("h1",[e._v("Published on Zenodo")]),r("h2",[e._v("DOI: "+e._s(e.publishedDOI))]),r("h2",[r("a",{attrs:{href:e.publishedUrl,target:"_blank"}},[e._v(e._s(e.publishedUrl))])]),r("p",[e._v(" Note: Newly uploaded item may not appear immediately in the resource list. ")]),e.requestedJoinCommunity?r("p",[e._v(" To be listed as part of the verified ShareLoc.XYZ community list, a notification will be sent to the admin team aand we will review request soon. ")]):e._e()]):e.prereserveDOI?r("b-notification",{attrs:{"has-icon":"","aria-close-label":"Close notification"}},[r("h1",[e._v("Ready to publish")]),r("h2",[e._v("Preserved DOI: "+e._s(e.prereserveDOI.doi))]),r("h2",[e._v(" You can also review and add additional information on Zenodo: "),r("a",{attrs:{href:e.prereserveUrl,target:"_blank"}},[e._v(e._s(e.prereserveUrl))])]),r("p",[e._v(" Note: Please check carefully before publishing, it won't be easy to remove items after made public. New changes will be added as a new version. ")])]):e._e(),e.client&&e.client.credential&&e.uploaded&&!e.publishedUrl?r("b-button",{staticClass:"button is-primary is-fullwidth",attrs:{expanded:""},on:{click:function(t){return e.publishDeposition()}}},[r("b-icon",{attrs:{icon:"upload"}}),r("span",[e._v("Publish")])],1):e._e()],1)],1),r("section",{staticStyle:{padding:"10px"}})],1)},Ee=[],Oe=(r("07ac"),r("466d"),r("53ca")),xe=r("21a6"),ke=r("c4e3"),De=r.n(ke),Ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("label",{staticClass:"label",attrs:{for:e.item.label}},[e._v(" "+e._s(e.item.label)+" "),!1!==e.item.isRequired?r("sup",{staticClass:"has-text-grey-light is-size-7"},[e._v("*")]):e._e()]),r("div",{staticClass:"control"},[r("b-taginput",{attrs:{id:e.item.label,data:e.filteredTags,"allow-new":!1!==e.item.allow_new,"open-on-focus":e.item.options&&e.item.options.length>0,autocomplete:"",icon:e.item.icon||"label",placeholder:e.item.placeholder},on:{input:function(t){return e.$emit("input",e.value)},typing:e.getFilteredTags},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),e.error?r("p",{staticClass:"help is-danger"},[e._v(" "+e._s(e.error)+" ")]):e._e()],1)])},Ie=[],Pe=(r("25f0"),{name:"tags",props:{error:{type:String,default:null},item:{type:Object,required:!0}},data:function(){return{value:void 0,filteredTags:[]}},mounted:function(){this.filteredTags=this.item.options},created:function(){this.value=this.item.value,this.item.value&&this.$emit("input",this.item.value)},methods:{getFilteredTags:function(e){this.filteredTags=this.item.options&&this.item.options.filter((function(t){return t.toString().toLowerCase().indexOf(e.toLowerCase())>=0}))}}}),Me=Pe,Re=(r("106f"),Object(_["a"])(Me,Ce,Ie,!1,null,null,null)),je=Re.exports,Le=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("label",{staticClass:"label",attrs:{for:e.item.label}},[e._v(" "+e._s(e.item.label)+" "),!1!==e.item.isRequired?r("sup",{staticClass:"has-text-grey-light is-size-7"},[e._v("*")]):e._e()]),r("div",{staticClass:"control"},[r("section",[r("b-field",[r("b-upload",{attrs:{id:e.item.label,multiple:"","drag-drop":"",expanded:""},on:{input:function(t){return e.updateFiles()}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[r("section",{staticClass:"section"},[r("div",{staticClass:"content has-text-centered"},[r("b-icon",{attrs:{icon:"upload",size:"is-large"}}),e._v(" Drop additional files here "),r("br"),e._l(e.value,(function(t,n){return r("span",{key:n,staticClass:"tag is-primary"},[e._v(" "+e._s(t.name.slice(0,20)+(t.name.length>20?"...":""))+" "),r("button",{staticClass:"delete is-small",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.removeFile(e.item.label,n)}}})])})),r("br"),e.value&&e.value.length>0?r("b-button",{staticClass:"is-small",on:{click:function(t){return t.preventDefault(),e.clearFiles()}}},[e._v("Clear files")]):e._e()],2)])])],1)],1),e.error?r("p",{staticClass:"help is-danger"},[e._v(" "+e._s(e.error)+" ")]):e._e()])])},Te=[],Ae={name:"files",props:{error:{type:String,default:null},item:{type:Object,required:!0}},data:function(){return{value:void 0}},created:function(){this.value=this.item.value,this.item.value&&this.$emit("input",this.item.value)},methods:{removeFile:function(e,t){this.value.splice(t,1),this.$forceUpdate()},clearFiles:function(){this.value=null,this.$emit("input",null),this.$forceUpdate()},updateFiles:function(){this.$emit("input",this.value),this.$forceUpdate()},trimEllip:function(e,t){return e?("object"===Object(Oe["a"])(e)&&(e=e.toString()),e.length>t?e.substring(0,t)+"...":e):e}}},Ue=Ae,We=Object(_["a"])(Ue,Le,Te,!1,null,null,null),Se=We.exports,Be=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"dataset"},[e.jsonFields&&e.jsonFields.length>0?r("form-json",{attrs:{btnReset:{value:"Reset"},btnSubmit:{value:"OK"},camelizePayloadKeys:!1,formFields:e.jsonFields,formName:"metadata",components:e.components},on:{formSubmitted:e.formSubmitted}}):e._e()],1)},ze=[],Ke=r("0d52"),qe=r.n(Ke),Fe=(r("fb5f"),r("0df0")),$e=r.n(Fe),Ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("label",{staticClass:"label",attrs:{for:e.item.label}},[e._v(" "+e._s(e.item.label)+" "),!1!==e.item.isRequired?r("sup",{staticClass:"has-text-grey-light is-size-7"},[e._v("*")]):e._e()]),r("div",{staticClass:"control"},[r("section",[r("b-field",[r("b-upload",{attrs:{id:e.item.label,multiple:"","drag-drop":"",expanded:""},on:{input:function(t){return e.updateFiles()}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[r("section",{staticClass:"section"},[r("div",{staticClass:"content has-text-centered"},[r("b-icon",{attrs:{icon:"upload",size:"is-large"}}),e._v(" Drop additional files here ")],1)])])],1),e._l(e.value,(function(t,n){return r("span",{key:n,staticClass:"tag is-primary",staticStyle:{cursor:"pointer"},on:{click:function(r){return e.previewFile(t)}}},[e._v(" "+e._s(t.name.slice(0,20)+(t.name.length>20?"...":""))+" "),r("button",{staticClass:"delete is-small",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.removeFile(e.item.label,n)}}})])})),r("div",{attrs:{id:e.containerId}}),e.viewer?r("span",[r("b-button",{staticClass:"button is-primary is-small",staticStyle:{"text-transform":"none",display:"inline-block"},attrs:{"icon-left":"camera"},on:{click:e.capture}},[e._v("Take screenshot")])],1):e._e(),r("span",[e._v("(You need to set at least one screenshot)")]),e.screenshots&&e.screenshots.length>0?r("b-carousel",{attrs:{progress:!1,autoplay:!1,"progress-type":"is-primary"}},e._l(e.screenshots,(function(t,n){return r("b-carousel-item",{key:n},[r("b-button",{staticStyle:{position:"absolute"},attrs:{type:"is-danger is-small","icon-left":"delete"},on:{click:function(t){return t.preventDefault(),e.removeScreenshot(n)}}},[e._v(" Remove ")]),r("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t,alt:"Screenshot"}})],1)})),1):e._e()],2),e.error?r("p",{staticClass:"help is-danger"},[e._v(" "+e._s(e.error)+" ")]):e._e()])])},Je=[],Ge={name:"file-preview",props:{error:{type:String,default:null},item:{type:Object,required:!0}},data:function(){return{viewer:null,value:void 0,screenshots:[],containerId:"preview-container-"+Math.random().toString(36).substr(2,9)}},created:function(){this.value=this.item.value,this.item.value&&this.$emit("input",this.item.value);var e=window.imjoy.api,t=window.location.origin+window.location.pathname;e.getPlugin(t+"SMLMFileIO.imjoy.html")},methods:{removeScreenshot:function(e){this.screenshots.splice(e,1),this.$emit("input",this.value)},capture:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.viewer.captureImage();case 2:r=t.sent,e.screenshots.includes(r)||e.screenshots.push(r),e.value.screenshots=e.screenshots,e.$emit("input",e.value);case 6:case"end":return t.stop()}}),t)})))()},removeFile:function(e,t){this.value.splice(t,1),this.$forceUpdate()},updateFiles:function(){this.$emit("input",this.value),this.$forceUpdate(),this.value&&this.value.length>0&&this.previewFile(this.value[this.value.length-1])},trimEllip:function(e,t){return e?("object"===Object(Oe["a"])(e)&&(e=e.toString()),e.length>t?e.substring(0,t)+"...":e):e},previewFile:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var n,a,s,i,o,c,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=window.imjoy.api,r.next=3,n.getPlugin("SMLM File IO");case 3:return a=r.sent,s=document.getElementById(t.containerId),i=s.getBoundingClientRect().width,s.style.height=i/2+111+"px",o=t.$buefy.loading.open({container:s}),r.prev=8,r.next=11,a.load(e);case 11:return c=r.sent,l=window.location.origin+window.location.pathname,r.next=15,n.createWindow({name:e.name.slice(0,40),src:l+"3DHistogram.imjoy.html",window_id:t.containerId,data:c.files});case 15:t.viewer=r.sent,r.next=22;break;case 18:throw r.prev=18,r.t0=r["catch"](8),console.error(r.t0),r.t0;case 22:return r.prev=22,o.close(),r.finish(22);case 25:case"end":return r.stop()}}),r,null,[[8,18,22,25]])})))()}}},He=Ge,Ye=Object(_["a"])(He,Ne,Je,!1,null,null,null),Ze=Ye.exports,Xe=r("651e"),Qe=r.n(Xe),Ve={name:"dataset",props:["resourceId","initRdf","files"],components:{"form-json":$e.a,TagInputField:je,DropFilesField:Se,FilePreviewField:Ze},computed:Object(n["a"])({components:function(){return{TagInputField:je,DropFilesField:Se,FilePreviewField:Ze}}},Object(o["b"])({allTags:function(e){return e.allTags}})),data:function(){return{jsonFields:[],expandOnHover:!1,expandWithDelay:!1,reduce:!1,fileField:{},rdf:null}},mounted:function(){this.initializeRdfForm(this.initRdf,this.files),this.fileField={name:"Files",value:this.files},this.$root.$on("formSubmitted",this.formSubmitted)},methods:{transformFields:function(e){var t={};for(var r in this.components)t[this.components[r].name]=r;var n,a=Object(y["a"])(e);try{for(a.s();!(n=a.n()).done;){var s=n.value;t[s.type]&&(s.is=t[s.type],delete s.type)}}catch(Zt){a.e(Zt)}finally{a.f()}return e},formSubmitted:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var n,a,s,i,o,c,l,_,u,d,p,f,h,m,g,b,w,v,O,x;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:for(s in n={type:"Type",name:"Name",description:"Description",license:"License",authors:"Authors",tags:"Tags"},a=e.values,t.rdf={},n)t.rdf[s]=a[n[s]];if(i="rdf.yaml",t.rdf.type="dataset",t.rdf.tags=t.rdf.tags||[],t.rdf.config=t.rdf.config||{},t.rdf.config._rdf_file="./"+i,t.rdf.authors=t.rdf.authors.split(",").map((function(e){return{name:e.trim()}})),t.rdf.tags.includes("smlm")||t.rdf.tags.push("smlm"),o=a["Files"],t.rdf.config._docstring&&(c=new Blob([t.rdf.config._docstring],{type:"text/markdown"}),l=new File([c],"README.md"),t.rdf.documentation="./README.md",o.push(l)),!o.screenshots){r.next=41;break}t.rdf.covers=t.rdf.covers||[],_=Object(y["a"])(o.screenshots),r.prev=16,_.s();case 18:if((u=_.n()).done){r.next=32;break}return d=u.value,p=Object(E["d"])(d),f="screenshot-"+Object(E["g"])(),h=new File([p],f+".png",{type:p.type}),o.push(h),r.next=26,Object(E["j"])({file:h,maxSize:256});case 26:m=r.sent,g=new File([m],f+"_thumbnail.png",{type:m.type}),o.push(g),t.rdf.covers.push("./"+f+"_thumbnail.png");case 30:r.next=18;break;case 32:r.next=37;break;case 34:r.prev=34,r.t0=r["catch"](16),_.e(r.t0);case 37:return r.prev=37,_.f(),r.finish(37);case 40:delete o.screenshots;case 41:b=Object.assign({},t.rdf),delete b._metadata,console.log("RDF: ",b),w=Qe.a.dump(b),v=new Blob([w],{type:"application/yaml"}),O=new File([v],i),o.push(O),x=new De.a,o.map((function(e){x.file(e.name,e)})),t.rdf.config._zip=x,t.rdf.config._yaml=w,t.$emit("submit",t.rdf);case 53:case"end":return r.stop()}}),r,null,[[16,34,37,40]])})))()},initializeRdfForm:function(e,t){var r=this;this.rdf=e||{},this.rdf.config=this.rdf.config||{},this.jsonFields=this.transformFields([{label:"Files",type:"file-preview",value:t,isRequired:!0},{label:"Name",placeholder:"name",value:this.rdf.name},{label:"Description",placeholder:"description",value:this.rdf.description,help:"A short description in one sentence"},{label:"Authors",placeholder:"authors (Full name, separated by comma)",value:this.rdf.authors&&this.rdf.authors.map((function(e){return e.name.split(";")[0]})).join(",")},{label:"License",type:"select",placeholder:"Select your license",options:Object.keys(qe.a).map((function(e){return{text:e,value:e,selected:r.rdf.license===e}}))},{label:"Tags",type:"tags",value:this.rdf.tags,placeholder:"Add a tag",options:this.allTags,allow_new:!0,icon:"label",isRequired:!0},{label:"Documentation",placeholder:"",type:"textarea",value:this.rdf.config._docstring,help:"Documentation in markdown format",isRequired:!1}])}}},et=Ve,tt=(r("6057"),Object(_["a"])(et,Be,ze,!1,null,null,null)),rt=tt.exports,nt=r("67be"),at=r.n(nt),st={name:"upload",components:{markdown:me,TagInputField:je,DropFilesField:Se,Dataset:rt},mounted:function(){this.dropFiles=null,this.uploadStatus="",this.uploadProgress=0,this.$root.$on("formSubmitted",this.formSubmitted)},computed:Object(n["a"])({sameNameDeposits:function(){var e=this;return this.similarDeposits&&this.similarDeposits.filter((function(t){return t.name===e.rdf.name}))},formatedModelYaml:function(){return this.rdfYaml&&"```yaml\n"+this.rdfYaml+"\n```\n"},prereserveUrl:function(){return this.prereserveDOI?"".concat(this.$store.state.zenodoBaseURL,"/deposit/").concat(this.prereserveDOI.recid):null},userId:function(){return this.client&&this.client.credential&&this.client.credential.user_id}},Object(o["b"])({imjoy:function(e){return e.imjoy},resourceItems:function(e){return e.resourceItems},client:function(e){return e.zenodoClient}})),data:function(){return{rdfFiles:null,dropFiles:null,uploadProgress:0,uploadStatus:"",uploaded:!1,jsonFields:null,rdfYaml:null,rdf:null,stepIndex:0,publishedUrl:null,publishedDOI:null,requestedJoinCommunity:!0,rdfType:"model",zipPackage:null,editedFiles:null,prereserveDOI:null,URI4Load:null,similarDeposits:null,depositId:null}},methods:{startUpload:function(){this.rdf={},this.rdfFiles=[],this.stepIndex=1},submitRDF:function(e){var t=this;this.$nextTick(Object(b["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.rdfYaml=e.config._yaml,delete e.config._yaml,t.zipPackage=e.config._zip,delete e.config._zip,t.rdf=e,r.next=7,t.client.getResourceItems({sort:"bestmatch",query:e.name});case 7:if(t.similarDeposits=r.sent,console.log("Similar deposits:",t.similarDeposits),!(t.similarDeposits.length>0)){r.next=12;break}return r.next=12,t.client.getCredential(!0);case 12:t.stepIndex=2;case 13:case"end":return r.stop()}}),r)}))))},loadRdfFromURL:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var n,a,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,n=at.a.resolvePath(),!n.test(e)){r.next=8;break}return r.next=5,Object(E["k"])(e.match(n)[4]);case 5:e=r.sent,r.next=12;break;case 8:if(!at()().test(e)){r.next=12;break}return r.next=11,Object(E["k"])(e);case 11:e=r.sent;case 12:if(a=/zenodo.org\/(record|deposit)\/([0-9]+)/g,s=a.exec(e),!s){r.next=35;break}if(t.depositId=parseInt(s[2]),!e.includes("/record/")){r.next=22;break}return r.next=19,t.client.getDeposit(t.depositId);case 19:i=r.sent,r.next=27;break;case 22:return r.next=24,t.client.getCredential(!0);case 24:return r.next=26,t.client.retrieve(t.depositId);case 26:i=r.sent;case 27:return console.log("orcid matched: "+t.depositId,i),r.next=30,Object(E["f"])(i);case 30:t.rdf=r.sent,t.zipPackage=null,t.files=i.files.map((function(e){return{type:"remote",name:e.filename||e.key,size:e.filesize||e.size,url:e.links.self,checksum:e.checksum}})),t.rdfFiles=i.files.map((function(e){return{type:"remote",name:e.filename||e.key,size:e.filesize||e.size,url:e.links.self,checksum:e.checksum}})),t.stepIndex=1;case 35:r.next=40;break;case 37:r.prev=37,r.t0=r["catch"](0),alert("Failed to fetch RDF from ".concat(e,", error: ").concat(r.t0));case 40:case"end":return r.stop()}}),r,null,[[0,37]])})))()},publishDeposition:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(confirm("Are you sure about publish your RDF now? Please note that after publishing you won't be able to remove it. Changes to existing published deposit can only be made by publishing new versions.")){t.next=2;break}return t.abrupt("return");case 2:return r=e.$buefy.loading.open({container:e.$el}),t.prev=3,t.next=6,e.client.publish(e.depositId);case 6:n=t.sent,console.log("Published",n),e.publishedDOI=n.doi,e.publishedUrl="".concat(e.$store.state.zenodoBaseURL,"/record/").concat(e.depositId);case 10:return t.prev=10,r.close(),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[3,,10,13]])})))()},exportPackage:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var r,n,a,s,i,o,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.zipPackage,r){t.next=37;break}r=new De.a,n=0,a=Object(y["a"])(e.editedFiles),t.prev=5,a.s();case 7:if((s=a.n()).done){t.next=29;break}if(i=s.value,e.uploadProgress=n/e.editedFiles.length*100,n++,"remote"!==i.type){t.next=26;break}return e.uploadStatus="Download fille "+i.name,t.next=15,fetch(i.url);case 15:if(o=t.sent,!o.ok){t.next=23;break}return t.next=19,o.blob();case 19:c=t.sent,r.file(i.name,c),t.next=24;break;case 23:throw new Error("Failed to download file: "+i.url);case 24:t.next=27;break;case 26:i instanceof Blob&&r.file(i.name,i);case 27:t.next=7;break;case 29:t.next=34;break;case 31:t.prev=31,t.t0=t["catch"](5),a.e(t.t0);case 34:return t.prev=34,a.f(),t.finish(34);case 37:return console.log("downloading",r),t.next=40,r.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:9}},(function(t){e.uploadProgress=t.percent,e.uploadStatus="Zipping package..."}));case 40:l=t.sent,e.uploadStatus="Exporting zip package...",Object(xe["saveAs"])(l,e.rdf.name+".zip"),e.uploadStatus="Done!";case 44:case"end":return t.stop()}}),t,null,[[5,31,34,37]])})))()},createOrUpdateDeposit:function(e,t){var r=this;return Object(b["a"])(regeneratorRuntime.mark((function n(){var a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.client.getCredential(!0);case 3:r.$forceUpdate(),n.next=10;break;case 6:return n.prev=6,n.t0=n["catch"](0),alert("Failed to login: ".concat(n.t0)),n.abrupt("return");case 10:return a=r.$buefy.loading.open({container:r.$el}),r.similarDeposits=null,n.prev=12,n.delegateYield(regeneratorRuntime.mark((function n(){var a,s,i,o,c,l,_,u,d,p,f,h;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r.uploadProgress=1,!e){n.next=27;break}return n.prev=2,n.next=5,r.client.retrieve(e);case 5:if(a=n.sent,t){n.next=15;break}return n.next=9,r.client.createNewVersion(a);case 9:return s=n.sent,i=s.links.latest_draft.split("/"),e=parseInt(i[i.length-1]),n.next=14,r.client.retrieve(e);case 14:a=n.sent;case 15:if("inprogress"===a.state||"unsubmitted"===a.state){n.next=18;break}return n.next=18,r.client.edit(e);case 18:n.next=25;break;case 20:if(n.prev=20,n.t0=n["catch"](2),console.error(n.t0),confirm("Failed to retrieve existing deposit (id: ".concat(e,"), would you like to create a new deposit instead?"))){n.next=25;break}return n.abrupt("return",{v:void 0});case 25:n.next=30;break;case 27:return n.next=29,r.client.createDeposition();case 29:a=n.sent;case 30:if(r.depositId=a.id,o="".concat(r.client.baseURL,"/record/").concat(r.depositId,"/files/"),c=null,!r.rdf.documentation||r.rdf.documentation.startsWith("http")||!r.rdf.documentation.endsWith(".md")){n.next=40;break}if(l=r.zipPackage.files[r.rdf.documentation.replace("./","")],!l){n.next=40;break}return n.next=38,l.async("string");case 38:c=n.sent,c=_e.a.sanitize(ce()(c));case 40:return r.rdf.config=r.rdf.config||{},r.rdf.config._deposit=a,_=Object(E["h"])(r.rdf,o,c),r.requestedJoinCommunity&&_.communities.push({identifier:"shareloc-xyz"}),_.prereserve_doi=!0,n.next=47,r.client.updateMetadata(a,_);case 47:if(a=n.sent,r.prereserveDOI=a.metadata.prereserve_doi,r.rdf.id=a.metadata.prereserve_doi.doi,r.rdf.config._doi=a.metadata.prereserve_doi.doi,!t){n.next=54;break}return r.stepIndex=3,n.abrupt("return",{v:a});case 54:u=Object.values(r.zipPackage.files),r.rdf.covers&&r.rdf.covers.length>0&&(d=r.rdf.covers,u.sort((function(e,t){return d.includes("./"+e.name)&&!d.includes("./"+t.name)?1:!d.includes("./"+e.name)&&d.includes("./"+t.name)?-1:0}))),p=regeneratorRuntime.mark((function e(t){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!u[t].dir){e.next=3;break}return console.warn("Skipping directory: "+u[t].name),e.abrupt("return","continue");case 3:return e.next=5,u[t].async("blob");case 5:return n=e.sent,s=new File([n],u[t].name),e.next=9,r.client.uploadFile(a,s,(function(e){r.uploadProgress=Math.round(e/s.size*100),r.uploadStatus="Uploading ".concat(t+1,"/").concat(u.length,"(").concat(r.uploadProgress,"%): ").concat(s.name.slice(0,40),"... "),r.$forceUpdate()}));case 9:case"end":return e.stop()}}),e)})),f=0;case 58:if(!(f<u.length)){n.next=66;break}return n.delegateYield(p(f),"t1",60);case 60:if(h=n.t1,"continue"!==h){n.next=63;break}return n.abrupt("continue",63);case 63:f++,n.next=58;break;case 66:r.uploadProgress=0,r.uploadStatus="Successfully uploaded ".concat(u.length," files."),r.uploaded=!0,r.stepIndex=3;case 70:case"end":return n.stop()}}),n,null,[[2,20]])}))(),"t1",14);case 14:if(s=n.t1,"object"!==Object(Oe["a"])(s)){n.next=17;break}return n.abrupt("return",s.v);case 17:n.next=23;break;case 19:n.prev=19,n.t2=n["catch"](12),console.error(n.t2),alert("Failed to upload file: ".concat(n.t2));case 23:return n.prev=23,r.uploadProgress=0,a.close(),n.finish(23);case 27:case"end":return n.stop()}}),n,null,[[0,6],[12,19,23,27]])})))()}}},it=st,ot=(r("b0e9"),Object(_["a"])(it,ve,Ee,!1,null,"20f64138",null)),ct=ot.exports,lt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"attachments"},[e._l(e.normalizedAttachments,(function(t,n){return[t?r("h2",{key:n+"_title",staticStyle:{"font-size":"1.5rem","font-weight":"600","margin-top":"24px","margin-bottom":"16px","text-transform":"capitalize"},attrs:{id:n}},[e._v(" "+e._s(n)+" ")]):e._e(),t?r("b-table",{key:n+"_table",attrs:{data:e.convert2Array(t),detailed:!!t.type,"show-detail-icon":!!t.type},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.availableColumns,(function(n){return r("b-table-column",{key:n.field,attrs:{field:n.field,label:n.label,width:n.width||40,sortable:n.sortable}},[t.row[n.field]?["url"===n.type?r("a",{class:n.class,attrs:{href:t.row[n.field],target:"_blank"}},[e._v(" "+e._s(n.text)+" ")]):r("span",{class:n.class},[e._v(" "+e._s(t.row[n.field]&&t.row[n.field].slice(0,n.max_length)+(t.row[n.field].length>n.max_length?"...":""))+" ")])]:e._e()],2)}))}},{key:"detail",fn:function(e){return[r("resource-item-card",{attrs:{resourceItem:e.row}})]}}],null,!0)}):e._e()]}))],2)},_t=[],ut={name:"Attachments",props:{attachments:{type:Object,default:null},focusTarget:{type:String,default:null}},components:{"resource-item-card":X},data:function(){return{siteConfig:F,columns:[]}},mounted:function(){var e=this;setTimeout((function(){e.focus(e.focusTarget)}),100)},watch:{focusTarget:function(e){this.focus(e)}},computed:{availableColumns:function(){var e=this;return F.attachment_table.columns.filter((function(t){return e.columns.includes(t.field)}))},normalizedAttachments:function(){for(var e={},t=0,r=Object.keys(this.attachments);t<r.length;t++){var n=r[t],a=this.attachments[n];if("object"===Object(Oe["a"])(a)){for(var s=[],i=0,o=Object.keys(a);i<o.length;i++){var c=o[i],l=Object.assign({},a[c]);l.name=c,s.push(l)}e[n]=s}else e[n]=a}return e}},methods:{focus:function(e){if(e){var t=document.getElementById(e);t&&t.scrollIntoView()}},convert2Array:function(e){var t=[];if(this.columns=t,e instanceof Object&&e.constructor===Object){for(var r=[],n=0,a=Object.keys(e);n<a.length;n++){var s=a[n];if(e[s]instanceof Object){e[s]["id"]=s,r.push(e[s]);for(var i=0,o=Object.keys(e[s]);i<o.length;i++){var c=o[i];t.includes(c)||t.push(c)}}else{var l=e[s].split("/"),_=l[l.length-1]||"undefined";r.push({download_url:e[s],name:_}),t.includes("download_url")||t.push("download_url"),t.includes("name")||t.push("name")}}return r}if(Array.isArray(e)){for(var u=[],d=0;d<e.length;d++)if(e[d]instanceof Object){e[d]["id"]=d,u.push(e[d]);for(var p=0,f=Object.keys(e[d]);p<f.length;p++){var h=f[p];t.includes(h)||t.push(h)}}else{var m=e[d].split("/"),g=m[m.length-1]||m[m.length-2]||"undefined";u.push({download_url:e[d],name:g}),t.includes("download_url")||t.push("download_url"),t.includes("name")||t.push("name")}return u}return console.warn("Failed to convert: ",e),[]}}},dt=ut,pt=Object(_["a"])(dt,lt,_t,!1,null,"3b34356d",null),ft=pt.exports,ht=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-loading",{attrs:{"is-full-page":!1,active:e.loading,"can-cancel":!1},on:{"update:active":function(t){e.loading=t}}})],1)},mt=[],gt={name:"CommentBox",props:{title:{type:String,default:null},repo:{type:String,default:F.model_repo},label:{type:String,default:"comment"}},mounted:function(){var e=this;F.enable_comment&&(this.loading=!0,setTimeout((function(){return e.showCommentBox()}),200))},data:function(){return{loading:!1}},methods:{showCommentBox:function(){var e=this;if(this.loading=!0,this.title){var t=window.document.title;window.document.title=this.title;var r=document.createElement("script");r.src="https://utteranc.es/client.js",r.setAttribute("repo",this.repo),r.setAttribute("issue-term","title"),r.setAttribute("label",this.label),r.setAttribute("theme","github-light"),r.setAttribute("crossorigin","anonymous"),r.setAttribute("async",!0);for(var n=window.location.href,a=new URLSearchParams(window.location.search),s=0,i=Object.keys(this.$route.query);s<i.length;s++){var o=i[s];a.set(o,this.$route.query[o])}r.onload=function(){window.document.title=t,window.history.replaceState(null,"",n),e.loading=!1},r.onerror=function(){e.loading=!1};var c="".concat(window.location.pathname,"?").concat(a.toString());window.history.replaceState(null,"",c),this.$el.appendChild(r)}else console.warn("You need to specify a title for the comment box")}}},bt=gt,yt=Object(_["a"])(bt,ht,mt,!1,null,"6e296c2e",null),wt=yt.exports,vt=r("f820");a["default"].use(o["a"]),F.table_view=F.table_view||{columns:["name","authors","badges","apps"]};var Et=F.resource_categories.filter((function(e){return"dataset"===e.type}))[0].tag_categories,Ot=[];for(var xt in Et)Ot=Ot.concat(Et[xt]);var kt=F.zenodo_config.use_sandbox?"https://sandbox.zenodo.org":"https://zenodo.org";function Dt(e){if(!e.config||!e.config._normalized){e.config=e.config||{},e.covers=e.covers||[],e.authors=e.authors||[],e.description=e.description||"",e.covers&&!Array.isArray(e.covers)&&(e.covers=[e.covers]),"extension"===e.icon&&(e.icon="puzzle"),e.cover_images=[];var t,r=Object(y["a"])(e.covers);try{for(r.s();!(t=r.n()).done;){var n=t.value;n.includes("(")||n.includes(")")?console.error("cover image file name cannot contain brackets."):n.startsWith("http")?n.includes(" ")?e.cover_images.push(encodeURI(n)):e.cover_images.push(n):e.cover_images.push(encodeURI(Object(E["c"])(e.root_url,n)))}}catch(Zt){r.e(Zt)}finally{r.f()}e.allLabels=e.labels||[],e.license&&e.allLabels.push(e.license),e.applications&&(e.allLabels=e.allLabels.concat(e.applications)),e.tags&&(e.allLabels=e.allLabels.concat(e.tags.filter((function(e){return"string"===typeof e})).map((function(e){return e.toLowerCase()})))),e.allLabels=Array.from(new Set(e.allLabels.map((function(e){return e.toLowerCase()})))),e.apps=e.apps||[],e.download_url&&e.apps.unshift({name:"Download",icon:"download",url:e.download_url,show_on_hover:!0}),e.git_repo&&e.apps.unshift({name:"Git Repository",icon:"github",url:e.git_repo,show_on_hover:!0}),e.badges=e.badges||[],e.attachments=e.attachments||{},e.license&&e.badges.unshift({label:"license",ext:e.license,ext_type:"is-info",url:qe.a[e.license]&&qe.a[e.license].url}),e.size&&e.badges.unshift({label:"size",label_type:"is-dark",ext:e.size>1e6?Math.round(e.size/1e6)+"MB":Math.round(e.size/1e3)+"kB",ext_type:"is-primary"}),"model"===e.type&&e.co2&&e.badges.unshift({label:"CO2",ext:e.co2,ext_type:"is-success",run:function(){alert("SAVE THE EARTH: The carbon footprint for training this model is around ".concat(e.co2," lbs, reusing existing models can help save the earth from climate change."))}}),e.error&&(e.error.spec?e.badges.unshift({label:"spec",label_type:"is-dark",ext:"failing",ext_type:"is-danger",run:function(){alert("This model failed the specification checks, here are the errors: \n"+JSON.stringify(e.error.spec,null,"  "))}}):e.badges.unshift({label:"spec",label_type:"is-dark",ext:"passing",ext_type:"is-success",run:function(){alert("🎉 This model passed the specification checks!")}})),e.config._normalized=!0}}var Ct=new o["a"].Store({state:{loadedUrl:null,allApps:{},allTags:Ot,imjoy:null,resourceItems:[],zenodoClient:F.zenodo_config.enabled?new E["a"](kt,F.zenodo_config.client_id,F.zenodo_config.use_sandbox):null,zenodoBaseURL:kt,siteConfig:F},actions:{login:function(e){return Object(b["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.state.client.login();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),alert("Failed to login: ".concat(t.t0));case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},fetchResourceItems:function(e,t){return Object(b["a"])(regeneratorRuntime.mark((function r(){var n,a,s,i,o,c,l,_,u,d,p,f,h,m,g;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=t.manifest_url,a=t.repo,s=t.transform,e.state.loadedUrl!==n){r.next=4;break}return console.log("manifest already loaded"),r.abrupt("return");case 4:return r.next=6,e.state.zenodoClient.getResourceItems({});case 6:return i=r.sent,i.map((function(t){return e.commit("addResourceItem",t)})),o=e.state.siteConfig,r.next=11,fetch(n+"?"+Object(E["g"])());case 11:return c=r.sent,r.t0=JSON,r.next=15,c.text();case 15:if(r.t1=r.sent,l=r.t0.parse.call(r.t0,r.t1),l.collections&&o.partners){_=Object(y["a"])(l.collections);try{for(d=function(){var e=u.value,t=o.partners.filter((function(t){return t.id===e.id}));t.forEach((function(e){o.partners.splice(o.partners.indexOf(e),1)})),o.partners.push(e)},_.s();!(u=_.n()).done;)d()}catch(Zt){_.e(Zt)}finally{_.f()}}p=l.resources,f=JSON.parse(JSON.stringify(p)),h=Object(y["a"])(f);try{for(h.s();!(m=h.n()).done;)g=m.value,g.repo=a,e.commit("addResourceItem",g)}catch(Zt){h.e(Zt)}finally{h.f()}e.commit("normalizeItems",s),s&&(e.state.loadedUrl=n);case 24:case"end":return r.stop()}}),r)})))()}},mutations:{setImJoy:function(e,t){e.imjoy=t},addResourceItem:function(e,t){t.authors=t.authors||[],t.authors=t.authors.map((function(e){return"string"===typeof e?{name:e}:e})),t.config=t.config||{},t.config._rdf_file=t.config._rdf_file||t.source,"application"===t.type&&(e.allApps[t.id]=t),e.resourceItems.push(t),t.tags&&t.tags.length>0&&t.tags.map((function(t){e.allTags.includes(t)||e.allTags.push(t)}))},removeResourceItem:function(e,t){"application"===t.type&&delete e.allApps[t.id];var r=e.resourceItems.indexOf(t);r>=0&&e.resourceItems.splice(r,1)},normalizeItems:function(e,t){e.resourceItems.map((function(t){Dt(t);var r=F.resource_categories.filter((function(e){return e.type===t.type}))[0];if(r&&r.default_links){t.links=t.links||[];var n,a=Object(y["a"])(r.default_links);try{var s=function(){var r=n.value;e.resourceItems.filter((function(e){return e.id===r}))[0]?t.links.push(r):console.warn("Default link item not foud: "+r)};for(a.s();!(n=a.n()).done;)s()}catch(Zt){a.e(Zt)}finally{a.f()}}})),t&&e.resourceItems.map(t)}}});function It(){return Pt.apply(this,arguments)}function Pt(){return Pt=Object(b["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.loadImJoyBasicApp({process_url_query:!0,show_window_title:!1,show_progress_bar:!0,show_empty_window:!0,hide_about_imjoy:!0,menu_style:{},window_style:{width:"100%",height:"100%"},main_container:null,menu_container:"imjoy-menu",window_manager_container:null,imjoy_api:{}}).then(function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=window.location.origin+window.location.pathname,t.imjoy.pm.default_base_frame=r+"default_base_frame.html",t.imjoy.pm.init(),n=t.imjoy.api,window.imjoy=t.imjoy,Ct.commit("setImJoy",t.imjoy),t.$on("window-size-pos-changing",(function(e){var t,r=document.querySelectorAll(".reveal iframe"),n=Object(y["a"])(r);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.style.pointerEvents=e?"none":"all"}}catch(Zt){n.e(Zt)}finally{n.f()}})),t.addMenuItem({label:"➕ Load Plugin",callback:function(){var e=prompt("Please type a ImJoy plugin URL","");e&&t.loadPlugin(e)}}),window.api=n,window.imjoy=t.imjoy,window.app=t,e.next=13,t.loadPlugin(r+"SMLMFileIO.imjoy.html");case 13:return e.next=15,t.loadPlugin(r+"3DHistogram.imjoy.html");case 15:t.imjoy.pm.reloadPluginRecursively({uri:"https://imjoy-team.github.io/jupyter-engine-manager/Jupyter-Engine-Manager.imjoy.html"}).then((function(e){var t=window.location.search,r=new URLSearchParams(t),n=r.get("engine"),a=r.get("spec");n?e.api.createEngine({name:"MyCustomEngine",nbUrl:n,url:n.split("?")[0]}).then((function(){console.log("Jupyter Engine connected!")})).catch((function(e){console.error("Failed to connect to Jupyter Engine",e)})):e.api.createEngine({name:"MyBinder Engine",url:"https://mybinder.org",spec:a||"oeway/imjoy-binder-image/master"}).then((function(){console.log("Binder Engine connected!")})).catch((function(e){console.error("Failed to connect to MyBinder Engine",e)}))})),t.addMenuItem({label:"ℹ️ Github",callback:function(){window.open("https://github.com/imodpasteur/shareLoc.xyz")}});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e)}));case 1:case"end":return e.stop()}}),e)}))),Pt.apply(this,arguments)}function Mt(e,t,r){return Rt.apply(this,arguments)}function Rt(){return Rt=Object(b["a"])(regeneratorRuntime.mark((function e(t,r,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(r,n),t.showLoader(!0),e.prev=2,!r.passive){e.next=7;break}return e.next=6,window.api.createWindow({src:r.source,passive:!0});case 6:return e.abrupt("return");case 7:return e.next=9,window.api.getPlugin({src:r.source});case 9:return a=e.sent,e.next=12,a.run({config:{referer:window.location.href,mode:"all",type:"shareloc.xyz"},data:n});case 12:t.showLoader(!1),e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](2),console.error(e.t0),window.api.showMessage("".concat(e.t0.message));case 19:return e.prev=19,t.showLoader(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,15,19,22]])}))),Rt.apply(this,arguments)}function jt(e,t,r){return Lt.apply(this,arguments)}function Lt(){return Lt=Object(b["a"])(regeneratorRuntime.mark((function e(t,r,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(r,n),t.showLoader(!0),e.prev=2,!r.passive){e.next=7;break}return e.next=6,window.api.createWindow({src:r.source,passive:!0});case 6:return e.abrupt("return");case 7:return e.next=9,window.api.getPlugin({src:r.source});case 9:return a=e.sent,t.showLoader(!1),a.cancel?t.showLoader(!0,(function(){a.cancel()})):t.showLoader(!0),e.next=14,a.run({config:{referer:window.location.href,mode:"one",type:"shareloc.xyz"},data:n});case 14:e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](2),console.error(e.t0),window.api.showMessage("".concat(e.t0.message));case 20:return e.prev=20,t.showLoader(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[2,16,20,23]])}))),Lt.apply(this,arguments)}var Tt={notebook:"notebook-outline",dataset:"database",application:"puzzle",model:"hubspot"},At=function(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}();function Ut(e,t){if(!t.config||!t.config._linked){if(t.config=t.config||{},t.apps=t.apps||[],t.apps.unshift({name:"Share",icon:"share-variant",show_on_hover:!0,run:function(){var r=Object.assign({},e.$route.query);r.id=t.id,e.$router.replace({query:r}).catch((function(){})),e.$buefy.dialog.alert({title:"Sharing "+t.type,hasIcon:!0,icon:"share",message:"Here is the URL for sharing ".concat(t.name,": <br> <code>").concat(window.location.href,"</code>"),confirmText:"OK"})}}),t.source&&t.source.startsWith("http")&&t.apps.unshift({name:"Source",icon:"code-tags",show_on_hover:!0,run:function(){e.showSource(t)}}),"application"===t.type)t.apps.unshift({name:"Run",icon:"play",run:function(){e.allApps[t.name]?Mt(e,e.allApps[t.id],e.resourceItems):alert("This application is not ready or unavailable.")}});else if(t.links){var r,n=Object(y["a"])(t.links);try{var a=function(){var n,a=r.value,s=e.resourceItems.filter((function(e){return e.id===a})),i=Object(y["a"])(s);try{var o=function(){var r=n.value;t.apps.unshift({name:r.name,icon:r.icon||Tt[r.type],run:function(){e.allApps[a]?jt(e,e.allApps[a],t):e.showResourceItemInfo(r)}})};for(i.s();!(n=i.n()).done;)o()}catch(Zt){i.e(Zt)}finally{i.f()}};for(n.s();!(r=n.n()).done;)a()}catch(Zt){n.e(Zt)}finally{n.f()}}var s,i=e.resourceItems.filter((function(e){return e.links&&e.links.includes(t.id)})),o=Object(y["a"])(i);try{for(o.s();!(s=o.n()).done;){var c=s.value;t.attachments[c.type]?t.attachments[c.type].push(c):t.attachments[c.type]=[c]}}catch(Zt){o.e(Zt)}finally{o.f()}for(var l=function(){var r=u[_];Array.isArray(t.attachments[r])&&"files"!==r&&t.badges.unshift({label:r,label_type:"is-dark",ext:t.attachments[r].length,ext_type:"is-primary",run:function(){e.showAttachmentsDialog(t,r)}})},_=0,u=Object.keys(t.attachments);_<u.length;_++)l();t.config&&t.config._doi&&t.badges.unshift({label:t.config._doi,label_type:"is-dark",label_short:e.zenodoClient.isSandbox?"Zenodo":"DOI",url:e.zenodoClient.isSandbox?"".concat(t.config._deposit.links.html):"https://doi.org/".concat(t.config._doi)}),t.config._linked=!0}}var Wt={name:"Home",props:["resourceId"],components:{"resource-item-list":re,"resource-item-selector":D,"resource-item-info":we,"comment-box":wt,upload:ct,attachments:ft,markdown:me,about:vt["default"]},data:function(){return{initialized:!1,progress:100,searchTags:null,isTouchDevice:At,rawResourceItems:null,selectedItems:null,showMenu:!1,applications:[],dialogWindowConfig:{width:"800px",height:"670px",draggable:!0,fullscreen:!1},dialogWindows:[],selectedWindowsStack:[],selectedDialogWindow:null,selectedResourceItem:null,infoDialogFullscreen:!1,screenWidth:1e3,showInfoDialogMode:null,viewerUrl:null,infoDialogTitle:"",infoMarkdownUrl:null,infoCommentBoxTitle:null,selectedCategory:null,displayMode:"card",currentTags:[],selectedPartner:null}},mounted:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a,s,i,o,c,l,_,u,d,p=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.addEventListener("resize",this.updateSize),window.dispatchEvent(new Event("resize")),t=Object(y["a"])(this.resourceCategories),e.prev=3,t.s();case 5:if((r=t.n()).done){e.next=12;break}if(n=r.value,"dataset"!==n.type){e.next=10;break}return this.selectedCategory=n,e.abrupt("break",12);case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](3),t.e(e.t0);case 17:return e.prev=17,t.f(),e.finish(17);case 20:if(e.prev=20,a=new URLSearchParams(window.location.search),a.forEach((function(e,t){p.$route.query[t]=e})),s=window.location.pathname+"#"+window.location.hash.substr(1),window.history.replaceState(null,"",s),i=this.siteConfig.rdf_root_repo,o=this.$route.query.repo,c=this.siteConfig.manifest_url,!o){e.next=44;break}if(!o.startsWith("http")&&!o.startsWith("/")){e.next=33;break}c=o,e.next=43;break;case 33:if(2!==o.split("/").length){e.next=37;break}c="https://raw.githubusercontent.com/".concat(o,"/master/manifest.bioimage.io.json"),e.next=43;break;case 37:if(3!==o.split("/").length){e.next=41;break}c="https://raw.githubusercontent.com/".concat(o,"/manifest.bioimage.io.json"),e.next=43;break;case 41:throw alert("Unsupported repo format."),"Unsupported repo format.";case 43:i=o;case 44:return l=this,e.next=47,this.$store.dispatch("fetchResourceItems",{repo:i,manifest_url:c,transform:function(e){return Ut(l,e)}});case 47:_=this.selectedCategory&&this.selectedCategory.type,this.selectedItems=_?this.resourceItems.filter((function(e){return e.type===_})):this.resourceItems,this.resourceId&&(this.resourceId.startsWith("zenodo:")?(u=parseInt(this.resourceId.split(":")[1]),d=this.resourceItems.filter((function(e){return e.config&&e.config._deposit&&e.config._deposit.id===u}))[0],d&&(this.$route.query.id=d.id)):this.$route.query.id=this.resourceId),this.updateViewByUrlQuery(),this.$forceUpdate(),e.next=58;break;case 54:e.prev=54,e.t1=e["catch"](20),console.error(e.t1),alert("Failed to fetch manifest file from the repo: ".concat(e.t1,"."));case 58:case"end":return e.stop()}}),e,this,[[3,14,17,20],[20,54]])})));function t(){return e.apply(this,arguments)}return t}(),computed:Object(n["a"])({partners:function(){return this.siteConfig.partners&&this.siteConfig.partners.concat([{isJoinButton:!0,name:"Join Community Partners",icon:"/static/img/plus-sign.png"}])},resourceCategories:function(){var e=this;return this.selectedPartner?this.siteConfig.resource_categories.filter((function(t){return e.selectedPartner.resource_types.includes(t.type)})):this.siteConfig.resource_categories},fullLabelList:function(){var e=[];if(this.resourceItems){var t,r=this.selectedCategory&&this.selectedCategory.type,n=r?this.resourceItems.filter((function(e){return e.type===r})):this.resourceItems,a=Object(y["a"])(n);try{for(a.s();!(t=a.n()).done;){var s=t.value;s.allLabels.forEach((function(t){-1===e.indexOf(t)&&e.push(t.toLowerCase())}))}}catch(Zt){a.e(Zt)}finally{a.f()}}return e.sort((function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:1})),Array.from(new Set(e))},tagCategories:function(){if(this.selectedCategory)return this.selectedCategory&&this.selectedCategory.tag_categories;var e,t={},r=Object(y["a"])(this.resourceCategories);try{for(r.s();!(e=r.n()).done;){var n=e.value;t=Object.assign(t,n.tag_categories)}}catch(Zt){r.e(Zt)}finally{r.f()}return t}},Object(o["b"])({allApps:function(e){return e.allApps},zenodoClient:function(e){return e.zenodoClient},siteConfig:function(e){return e.siteConfig},resourceItems:function(e){return e.resourceItems}})),beforeDestroy:function(){window.removeEventListener("resize",this.updateSize)},methods:{goHome:function(){this.selectedPartner=null,this.searchTags=[];var e=Object.assign({},this.$route.query);delete e.partner,delete e.tags,this.$router.push({query:e}).catch((function(){}))},switchPartner:function(e){var t=this;if(e.isJoinButton)this.showJoinDialog();else{if(this.selectedPartner=e,this.selectedCategory=null,this.selectedPartner.default_type){var r,n=Object(y["a"])(this.resourceCategories);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(a.type===this.selectedPartner.default_type){this.selectedCategory=a;break}}}catch(Zt){n.e(Zt)}finally{n.f()}}this.$nextTick((function(){t.searchTags=t.selectedPartner&&t.selectedPartner.tags}));var s=Object.assign({},this.$route.query);s.partner=e.id,s.tags=e.tags,this.$router.replace({query:s}).catch((function(){}))}},preventPageScroll:function(){document.getElementsByTagName("html")[0].style.overflow="hidden",document.body.style.overflow="hidden"},restorePageScroll:function(){document.getElementsByTagName("html")[0].style.overflow="auto",document.body.style.overflow="auto"},showJoinDialog:function(){this.infoDialogTitle="Join ".concat(this.siteConfig.site_name," as a community partner"),this.infoCommentBoxTitle=this.infoDialogTitle,this.infoMarkdownUrl=this.siteConfig.join_partners_url,this.showInfoDialogMode="markdown",this.screenWidth<700&&(this.infoDialogFullscreen=!0),this.$modal.show("info-dialog")},showAttachmentsDialog:function(e,t){this.infoDialogTitle=t?e.name+": "+t:e.name+": Attachments",e._focus=t,this.selectedResourceItem=e,this.showInfoDialogMode="attachments",this.screenWidth<700&&(this.infoDialogFullscreen=!0),this.$modal.show("info-dialog")},removePartner:function(){this.selectedPartner&&(this.selectedPartner=null,this.updateQueryTags(this.searchTags))},updateQueryTags:function(e){if(this.initialized){this.searchTags=e,e&&(e.length>0?this.currentTags=e:this.currentTags=null);var t=Object.assign({},this.$route.query);this.selectedCategory?"model"===this.selectedCategory.type&&Object.keys(t).length<=1?delete t.type:t.type=this.selectedCategory.type:t.type="all",this.currentTags?t.tags=this.currentTags.join(","):delete t.tags,this.selectedPartner?this.selectedPartner.tags&&JSON.stringify(this.selectedPartner.tags)==JSON.stringify(this.currentTags)&&delete t.tags:delete t.partner,this.$router.replace({query:t}).catch((function(){}))}else this.initialized=!0},displayModeChanged:function(e){this.displayMode=e},addWindow:function(e){this.selectedDialogWindow&&this.selectedWindowsStack.push(this.selectedDialogWindow),this.selectWindow(e),this.dialogWindows.push(e),this.screenWidth<700&&(this.dialogWindowConfig.fullscreen=!0),this.$modal.show("window-modal-dialog"),this.$forceUpdate()},selectWindow:function(e){e.closing||(this.selectedDialogWindow=e)},updateSize:function(){var e=this;Object(E["e"])((function(){e.screenWidth=window.innerWidth,e.screenWidth<700&&(e.infoDialogFullscreen=!0),e.$forceUpdate()}),250)()},showLoader:function(e,t){e?this.loadingComponent=this.$buefy.loading.open({canCancel:!0,onCancel:function(){t&&t()}}):this.loadingComponent&&(this.loadingComponent.close(),this.loadingComponent=null)},showAboutDialog:function(){this.showInfoDialogMode="about",this.infoDialogTitle="About",this.screenWidth<700&&(this.infoDialogFullscreen=!0),this.$modal.show("info-dialog");var e=Object.assign({},this.$route.query);e.show="about",this.$router.replace({query:e}).catch((function(){}))},showUploadDialog:function(){this.infoDialogTitle="Uploading data to ".concat(this.siteConfig.site_name),this.showInfoDialogMode="upload",this.currentDepositionId=null,this.screenWidth<700&&(this.infoDialogFullscreen=!0),this.$modal.show("info-dialog");var e=Object.assign({},this.$route.query);e.show="upload",this.$router.replace({query:e}).catch((function(){}))},showEditDialog:function(){this.infoDialogTitle="Updating metadata",this.showInfoDialogMode="edit",this.screenWidth<700&&(this.infoDialogFullscreen=!0),this.$modal.show("info-dialog");var e=Object.assign({},this.$route.query);e.show="edit",this.$router.replace({query:e}).catch((function(){}))},showAboutPartner:function(e){e.about_url.startsWith("http")?e.about_url.endsWith(".md")?(this.infoDialogTitle="About "+e.name,this.infoMarkdownUrl=e.about_url,this.showInfoDialogMode="markdown",this.screenWidth<700&&(this.infoDialogFullscreen=!0),this.$modal.show("info-dialog")):window.open(e.about_url):e.description?this.$buefy.dialog.alert({title:"About "+e.name,message:e.description,confirmText:"OK"}):this.$buefy.dialog.alert({title:"Oops, no details about "+e.name,message:"This partner is did not provide any details!",confirmText:"OK"})},showSource:function(e){e.source.endsWith(".yaml")||e.source.endsWith(".yml")||e.source.endsWith(".imjoy.html")?(this.infoDialogTitle="Source: "+e.name,this.infoMarkdownUrl=e.source,this.infoCommentBoxTitle=e.name,this.showInfoDialogMode="markdown",this.screenWidth<700&&(this.infoDialogFullscreen=!0),this.$modal.show("info-dialog")):e.source.startsWith("http")?window.open(e.source):this.$buefy.dialog.alert({title:"Source: "+e.name,hasIcon:!0,icon:"code-tags",message:e.source,confirmText:"OK"})},showResourceItemInfo:function(e){if(this.showInfoDialogMode="item",e._focus=focus,this.selectedResourceItem=e,this.infoDialogTitle=this.selectedResourceItem.name,this.infoDialogFullscreen=!1,this.$modal.show("info-dialog"),e.id){var t=Object.assign({},this.$route.query);t.id=e.id,this.$router.replace({query:t}).catch((function(){}))}},updateStatus:function(e){!0===e.loading&&this.showMessage("Loading..."),!1===e.loading&&this.showMessage("Loading done.")},closeInfoWindow:function(){this.selectedResourceItem=null,this.showInfoDialogMode=null,this.infoMarkdownUrl=null,this.infoCommentBoxTitle=null,this.$modal.hide("info-dialog");var e=Object.assign({},this.$route.query);delete e.id,delete e.show,this.$router.replace({query:e}).catch((function(){}))},maximizeInfoWindow:function(){this.infoDialogFullscreen=!this.infoDialogFullscreen},closeDialogWindow:function(e){if(this.selectedDialogWindow.id===e.id){var t=this.dialogWindows.indexOf(e);t>=0&&this.dialogWindows.splice(t,1),this.selectedDialogWindow=this.selectedWindowsStack.pop(),this.selectedDialogWindow||this.$modal.hide("window-modal-dialog")}else console.warn("ignore close window: "+e.id)},minimizeDialogWindow:function(){this.$modal.hide("window-modal-dialog")},maximizeDialogWindow:function(){this.dialogWindowConfig.fullscreen=!this.dialogWindowConfig.fullscreen},enter:function(){var e=window.pageYOffset+this.$refs.search_anchor.getBoundingClientRect().top;window.scrollTo({top:e-100,behavior:"smooth",block:"start"})},updateResourceItemList:function(e){this.selectedItems=e},updateViewByUrlQuery:function(){var e=this,t=!1;if(this.$route.query.show&&("about"===this.$route.query.show?this.showAboutDialog():"upload"===this.$route.query.show?this.showUploadDialog():"join"===this.$route.query.show&&this.showJoinDialog()),this.$route.query.id){var r=this.resourceItems.filter((function(t){return t.id===e.$route.query.id}))[0];r&&(this.showResourceItemInfo(r),t=!0)}this.$route.query.tags&&("string"===typeof this.$route.query.tags?this.searchTags=this.$route.query.tags.split(","):this.searchTags=this.$route.query.tags,t=!0),this.$route.query.type&&("all"===this.$route.query.type?this.selectedCategory=null:this.selectedCategory=this.resourceCategories.filter((function(t){return t.type===e.$route.query.type}))[0],t=!0),this.$route.query.partner&&this.siteConfig.partners&&(this.selectedPartner=this.siteConfig.partners.filter((function(t){return t.id===e.$route.query.partner}))[0],this.selectedPartner&&(this.$nextTick((function(){e.searchTags?e.searchTags=e.searchTags.concat(e.selectedPartner.tags):e.searchTags=e.selectedPartner.tags})),t=!1)),t&&this.enter()},showProgress:function(e){this.progress=e,this.$forceUpdate()},showMessage:function(e,t){t=t||5e3;var r={message:e.slice(0,200),onAction:function(){},actionText:"Close",duration:t,queue:!1};this.$buefy.snackbar.open(r)},showWindowDialog:function(){},closeWindowDialog:function(){},getLabelCount:function(e){return this.filteredModels.filter((function(t){return t.allLabels.includes(e)})).length},getModelsCount:function(){return this.filteredModels.length}}},St=Wt,Bt=(r("cccb"),Object(_["a"])(St,m,g,!1,null,null,null)),zt=Bt.exports;a["default"].use(h["a"]);var Kt=[{path:"/",name:"Home",component:zt},{path:"/r/:resourceId+",name:"ResourceItemInfo",component:we,props:!0},{path:"/p/:resourceId+",name:"Package",component:zt,props:!0},{path:"/upload",name:"Upload",component:ct},{path:"/app",name:"App",component:re},{path:"/about",name:"About",component:function(){return Promise.resolve().then(r.bind(null,"f820"))}}],qt=new h["a"]({base:"/",routes:Kt}),Ft=qt,$t=r("289d"),Nt=(r("5abe"),r("f935"),r("1881")),Jt=r.n(Nt),Gt=(r("5363"),r("7bb1")),Ht=r("4c93"),Yt=r("2593");a["default"].component("ValidationProvider",Gt["a"]),Object.keys(Ht).forEach((function(e){Object(Gt["b"])(e,Object(n["a"])(Object(n["a"])({},Ht[e]),{},{message:Yt["a"][e]}))})),a["default"].use(Jt.a),a["default"].use($t["a"]),a["default"].config.productionTip=!1,new a["default"]({router:Ft,render:function(e){return e(d)},store:Ct,created:function(){It()}}).$mount("#app")},"5ced":function(e,t,r){},6057:function(e,t,r){"use strict";var n=r("4213"),a=r.n(n);a.a},"73dd":function(e,t,r){},"85ec":function(e,t,r){},9224:function(e){e.exports=JSON.parse('{"a":"0.2.14"}')},"944d":function(e,t,r){},a952:function(e,t,r){},b0e9:function(e,t,r){"use strict";var n=r("4e3a"),a=r.n(n);a.a},b133:function(e,t,r){"use strict";var n=r("0e07"),a=r.n(n);a.a},b35e:function(e,t,r){"use strict";var n=r("299b"),a=r.n(n);a.a},cccb:function(e,t,r){"use strict";var n=r("5ced"),a=r.n(n);a.a},cf4e:function(e,t,r){"use strict";var n=r("f56a"),a=r.n(n);a.a},dde9:function(e,t,r){"use strict";var n=r("03dc"),a=r.n(n);a.a},f56a:function(e,t,r){},f820:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"about",style:{"background-image":"url("+e.siteConfig.background_image+")"}},[r("section",{staticClass:"hero"},[r("div",{staticClass:"hero-body"},[r("div",{staticClass:"container"},[r("h1",{staticClass:"title"},[e._v("About "+e._s(e.siteConfig.site_name))]),r("h2",{staticClass:"subtitle"},[e._v("v"+e._s(e.version))])])])]),r("br"),r("section",{staticStyle:{"text-align":"center"}},[e.siteConfig.contribute_url?r("b-button",{on:{click:function(t){return e.$emit("contribute")}}},[e._v("Contribute Models")]):e._e(),e.siteConfig.join_partners_url?r("b-button",{on:{click:function(t){return e.$emit("join")}}},[e._v("Join Community Partners")]):e._e()],1),r("br"),e.siteConfig.footer?r("div",{staticClass:"columns is-mobile is-centered"},e._l(e.siteConfig.footer,(function(t){return r("div",{key:t.label,staticClass:"column is-one-quarter",staticStyle:{"text-align":"center"}},[r("b-tooltip",{attrs:{label:t.tooltip,position:"is-top"}},[r("a",{attrs:{href:t.url,target:"_blank"}},[r("figure",[r("img",{staticStyle:{"max-height":"55px"},attrs:{src:t.logo}}),r("figcaption",{staticClass:"hide-on-small-screen"},[e._v(" "+e._s(t.label)+" ")])])])])],1)})),0):e._e(),e.siteConfig.footnote?r("div",{staticStyle:{"text-align":"center"}},[r("p",[e._v(e._s(e.siteConfig.footnote))])]):e._e()])},a=[],s=r("133d"),i=r("9224"),o={name:"About",data:function(){return{version:i["a"],siteConfig:s}}},c=o,l=(r("3ecb"),r("2877")),_=Object(l["a"])(c,n,a,!1,null,"68698558",null);t["default"]=_.exports},f935:function(e,t,r){}});
//# sourceMappingURL=app.793c5448.js.map